

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="V. Louis">
  <meta name="keywords" content="">
  
    <meta name="description" content="第3章 使用MySQL安装以及导入数据 参考：《mysql必知必会》 下载_《 MySQL必知必会 》下载 以及 Ubuntu16.04 下配置其使用的软件环境…_臧竹萌1111的博客-CSDN博客 sql - MySQL: SyntaxError: Unexpected identifier - Stack Overflow  连接 选择数据库 使用关键字USE database_name来使用">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL-notes">
<meta property="og:url" content="http://example.com/2023/04/10/MySQL-notes/index.html">
<meta property="og:site_name" content="V. Louis">
<meta property="og:description" content="第3章 使用MySQL安装以及导入数据 参考：《mysql必知必会》 下载_《 MySQL必知必会 》下载 以及 Ubuntu16.04 下配置其使用的软件环境…_臧竹萌1111的博客-CSDN博客 sql - MySQL: SyntaxError: Unexpected identifier - Stack Overflow  连接 选择数据库 使用关键字USE database_name来使用">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230211162044572.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230211162225779.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230211162428006.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230211162644782.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230211162840562.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230211163848007.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230211180626380.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230211180905801.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230211181516227.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230211181938471.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230211182322663.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230211182529989.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230211182709985.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230211183133884.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230211183307380.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230213161117911.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230213161424786.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230213161721459.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230213162233008.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230213162453504.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230213163004493.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230213182636141.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230213182937587.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230213183403543.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230213183607970.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230213183800195.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230213184346166.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230213184518450-1676285119743-1.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230213185200735.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230213185519109.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230213185835612.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230213190109228.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230213190614339.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230213191358538.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230214154101280.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230214154333150.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230214154754890-1676360875965-1.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230214161029597.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230214161218760.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230214210600709.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230214210814146.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230214211114780.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230214211453735.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230214211724253.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230214212212744.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230214212718266.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230215100226976.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230215100635147.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230215100943840.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230215101444384.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230215104751693.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230215152759174.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230215153050493.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230215171301058.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230215171736734.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230215204519245.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230215205129714.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230215205236673.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230215205441093.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230221132528720.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230221132622247.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230221132640852.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230221133248225.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230221133711150.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230221134128897.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230221134510629.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230221134755007.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230221135544563.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230221135806815.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230221150320565.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230221150550022.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230221150724000.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230221151531426.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230221151708342.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230221152011233-1676964011784-71.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230221152439760-1676964280505-73.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230221152753440.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230221153035751.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230221154338294.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230221154540972.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230221155055512.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230224172820327.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230227151830658-1677482311580-1.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230227152452607.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230227152736813.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230227152909644.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230227153033992.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230227153359036-1677483239970-3.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230227153413474.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230227153554259.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230227153627374.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230301170843798.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230301170855337.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230301171013381.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230301171313853.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230301171518251-1677662119109-1.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230301172720577.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230301205721502.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230306192630117.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230306193356491.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230316200857452.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230316200912066.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230316201253071.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230316201557304.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230316201904461.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230316202244780.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230316202321627.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230316203128822.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230316203225310.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230316203803130.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230316204143033.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230317193404320.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230317193823312.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230317194344281.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230317194702084.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230317195056982.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230317195219700.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230317195330841.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230317200730200.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230317201701651.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230317201713187.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230317203929480.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230317204000095.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230317204013875.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230322200658936.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230323105716102.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230323110522113.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230324191506415-1679656507093-1.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230324191623867.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230330200129898.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230330200142250-1680177703142-1.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230330200719343.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230330200749551.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230330200957571.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230330201021643.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230330201401135.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230330201409427.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230405172154398.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230405190411517.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230405190758646.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230405191115569.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230405191226848.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230405191655762.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230405191708370.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230405192540066.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230405192701899.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230405192711053.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230405192740380.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230405192801219.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230405192840514.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230405193346796.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230405193401346.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230405193421582.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230405193539887.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230405200342525.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230405200451196.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230405200553337.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230405200822936.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230405201458333.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230405201507829.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230405201804353.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230405201822388.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230405201837790.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230408154412637.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230408154923215.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230408155243886.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230408155526318.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230408155811146.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230408161827596.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230408161842863.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230408162303814.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230408162555344.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230408162824680.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230408163641211.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230408163719535.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230408164240080.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230408164333909.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230408164535997.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230408164622281.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230408165225660.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230408165236042.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230408165342150.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230408165826008.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230408165923585.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230408170118878.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230408170128329.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230408171413892.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230408171504395.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230408171550553.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230408171845993.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230408172000954.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230408172028283.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230408172054556.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230408172330664.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230408172427066.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230408172508431.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230410145225201.png">
<meta property="og:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230410145408405.png">
<meta property="article:published_time" content="2023-04-10T11:49:43.000Z">
<meta property="article:modified_time" content="2023-04-10T11:51:46.868Z">
<meta property="article:author" content="V. Louis">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://example.com/2023/04/10/MySQL-notes/image-20230211162044572.png">
  
  
  
  <title>MySQL-notes - V. Louis</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.4","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 5.4.2"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Villian Louis&#39;s Blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                <span>Home</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                <span>Archives</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                <span>Categories</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                <span>Tags</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                <span>About</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="MySQL-notes"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2023-04-10 19:49" pubdate>
          April 10, 2023 pm
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          23k words
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          196 mins
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">MySQL-notes</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="第3章-使用MySQL"><a href="#第3章-使用MySQL" class="headerlink" title="第3章 使用MySQL"></a>第3章 使用MySQL</h1><h2 id="安装以及导入数据"><a href="#安装以及导入数据" class="headerlink" title="安装以及导入数据"></a>安装以及导入数据</h2><ul>
<li>参考：<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_26731219/article/details/113298008">《mysql必知必会》 下载_《 MySQL必知必会 》下载 以及 Ubuntu16.04 下配置其使用的软件环境…_臧竹萌1111的博客-CSDN博客</a></li>
<li><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/50645402/mysql-syntaxerror-unexpected-identifier">sql - MySQL: SyntaxError: Unexpected identifier - Stack Overflow</a></li>
</ul>
<h2 id="连接"><a href="#连接" class="headerlink" title="连接"></a>连接</h2><p><img src="image-20230211162044572.png" srcset="/img/loading.gif" lazyload alt="image-20230211162044572"></p>
<h2 id="选择数据库"><a href="#选择数据库" class="headerlink" title="选择数据库"></a>选择数据库</h2><ul>
<li><p>使用关键字<code>USE database_name</code>来使用一个数据库:</p>
<p><img src="image-20230211162225779.png" srcset="/img/loading.gif" lazyload alt="image-20230211162225779"></p>
</li>
</ul>
<h2 id="了解数据库和表"><a href="#了解数据库和表" class="headerlink" title="了解数据库和表"></a>了解数据库和表</h2><ul>
<li><p>使用<code>SHOW DATABASES</code>，返回一个数据库的列表</p>
<p><img src="image-20230211162428006.png" srcset="/img/loading.gif" lazyload alt="image-20230211162428006"></p>
</li>
</ul>
<ul>
<li><p>使用<code>SHOW TABLES</code>，获取一个数据库内的所有table的列表</p>
<p><img src="image-20230211162644782.png" srcset="/img/loading.gif" lazyload alt="image-20230211162644782"></p>
</li>
<li><p>使用<code>SHOW COLUMNS</code> 展示表列信息</p>
<p><img src="image-20230211162840562.png" srcset="/img/loading.gif" lazyload alt="image-20230211162840562"></p>
</li>
</ul>
<ul>
<li>使用<code>HELP</code>:<a target="_blank" rel="noopener" href="http://c.biancheng.net/view/7474.html">如何查看MySQL系统帮助？ (biancheng.net)</a></li>
</ul>
<h1 id="第4章-检索数据"><a href="#第4章-检索数据" class="headerlink" title="第4章 检索数据"></a>第4章 检索数据</h1><ul>
<li>为了使用<code>SELECT</code>检索table数据，至少提供两条信息：<ul>
<li>选择的attribute；</li>
<li>From where</li>
</ul>
</li>
</ul>
<h2 id="检索单个列"><a href="#检索单个列" class="headerlink" title="检索单个列"></a>检索单个列</h2><ul>
<li><img src="image-20230211163848007.png" srcset="/img/loading.gif" lazyload alt="image-20230211163848007"></li>
</ul>
<ul>
<li>如果没有明确排序查询的结果，则返回的数据的顺序没有特殊意义。</li>
<li>多条SQL语句必须使用分号<code>;</code>分隔。<ul>
<li>如果使用的是mysql命令行，必须加上分号来结束SQL语句</li>
</ul>
</li>
<li>SQL语句不区分大小写。<ul>
<li><code>SELECT</code> 、 <code>select</code> 和 <code>Select</code> 都是相同的。</li>
<li>对所有的SQL关键字使用大写，对所有的列和表明使用小写。<ul>
<li>方便代码阅读和调试</li>
</ul>
</li>
</ul>
</li>
<li>处理SQL语句的时候，其所有的空格都被忽略。<ul>
<li>将SQL语句分成多行更容易阅读和调试。</li>
</ul>
</li>
</ul>
<h2 id="检索多个列"><a href="#检索多个列" class="headerlink" title="检索多个列"></a>检索多个列</h2><ul>
<li><p>使用<code>SELECT</code> 关键字后给出多个列名，列名之间必须以逗号<code>,</code>分隔。</p>
<ul>
<li>需要注意列名之间加上逗号，但是最后一个列名不加。</li>
</ul>
<p><img src="image-20230211180626380.png" srcset="/img/loading.gif" lazyload alt="image-20230211180626380"></p>
</li>
</ul>
<ul>
<li>SQL语句一般返回原始的、无格式的数据。<ul>
<li>数据的格式化是一个表示问题，不是检索问题。</li>
</ul>
</li>
</ul>
<h2 id="检索所有列"><a href="#检索所有列" class="headerlink" title="检索所有列"></a>检索所有列</h2><ul>
<li><p>使用<code>*</code>通配符</p>
<p><img src="image-20230211180905801.png" srcset="/img/loading.gif" lazyload alt="image-20230211180905801"></p>
</li>
</ul>
<ul>
<li>列的顺序一般是列在表定义中出现的顺序。</li>
<li>一般，除非确实需要表中的每个列，否则最好不要使用<code>*</code>通配符。<ul>
<li>检索不需要的列通常会降低检索和应用程序的性能。</li>
</ul>
</li>
<li>使用通配符可以检索出名字未知的列。</li>
</ul>
<h2 id="检索不同的行"><a href="#检索不同的行" class="headerlink" title="检索不同的行"></a>检索不同的行</h2><ul>
<li><p>使用<code>DISTINCT</code>关键字，去除duplicate。</p>
<p><img src="image-20230211181516227.png" srcset="/img/loading.gif" lazyload alt="image-20230211181516227"></p>
</li>
</ul>
<h2 id="限制结果"><a href="#限制结果" class="headerlink" title="限制结果"></a>限制结果</h2><ul>
<li><p>使用<code>LIMIT</code>子句，限定返回第一行或前几行。</p>
<p><img src="image-20230211181938471.png" srcset="/img/loading.gif" lazyload alt="image-20230211181938471"></p>
</li>
</ul>
<ul>
<li><p>使用<code>LIMIT n, m</code>，返回第<code>n</code>行起的共<code>m</code>行。</p>
<p><img src="image-20230211182322663.png" srcset="/img/loading.gif" lazyload alt="image-20230211182322663"></p>
</li>
<li><p>检索出来的第一行为<strong>行0</strong>，而不是行1。</p>
<ul>
<li><p><code>LIMIT 1,1</code>检索出来的结果是第二行。</p>
<p><img src="image-20230211182529989.png" srcset="/img/loading.gif" lazyload alt="image-20230211182529989"></p>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>如果没有足够的行，MySQL只返回它能返回的那么多行。</p>
<p><img src="image-20230211182709985.png" srcset="/img/loading.gif" lazyload alt="image-20230211182709985"></p>
</li>
</ul>
<h2 id="使用完全限定的表名"><a href="#使用完全限定的表名" class="headerlink" title="使用完全限定的表名"></a>使用完全限定的表名</h2><ul>
<li><p>可以使用完全限定的名字来引用列。</p>
<ul>
<li><p>同时使用表名和列。</p>
<p><img src="image-20230211183133884.png" srcset="/img/loading.gif" lazyload alt="image-20230211183133884"></p>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>表名也可以使用数据库名来进行限定。</p>
<ul>
<li><p>同时使用数据库名和表名。</p>
<p><img src="image-20230211183307380.png" srcset="/img/loading.gif" lazyload alt="image-20230211183307380"></p>
</li>
</ul>
</li>
</ul>
<ul>
<li>存在一些情形需要使用完全限定名。</li>
</ul>
<h1 id="第5章-排序检索数据"><a href="#第5章-排序检索数据" class="headerlink" title="第5章 排序检索数据"></a>第5章 排序检索数据</h1><h2 id="排序数据"><a href="#排序数据" class="headerlink" title="排序数据"></a>排序数据</h2><ul>
<li>检索出的数据并不是以纯粹的随机顺序显示。<ul>
<li>如果不排序，数据一般将以在底层table中出现的顺序显示。</li>
<li>如果不明确控制，不能（也不应该）依赖该排序顺序。</li>
</ul>
</li>
</ul>
<ul>
<li>使用<code>ORDER BY</code> 子句，来明确排序<code>SELECT</code> 子句检索出的数据。<ul>
<li><code>ORDER BY</code> 子句取一个或多个列的名字，据此对输出进行排序。</li>
<li><img src="image-20230213161117911.png" srcset="/img/loading.gif" lazyload alt="image-20230213161117911"></li>
</ul>
</li>
</ul>
<ul>
<li><p>使用非检索的列排序数据是完全合法的。</p>
<p><img src="image-20230213161424786.png" srcset="/img/loading.gif" lazyload alt="image-20230213161424786"></p>
</li>
</ul>
<h2 id="按多个列排序"><a href="#按多个列排序" class="headerlink" title="按多个列排序"></a>按多个列排序</h2><ul>
<li><p>为了按多个列排序，只要指定列名，列名之间用逗号分开即可。</p>
<ul>
<li>类似选择（SELECT）多个列一样。</li>
</ul>
<p><img src="image-20230213161721459.png" srcset="/img/loading.gif" lazyload alt="image-20230213161721459"></p>
</li>
</ul>
<ul>
<li>按多个列排序时，排序完全按所规定的顺序进行。<ul>
<li>如，对于上述例子中的输出，仅在多个行具有相同的<code>prod_price</code> 值时才对产品按<code>prod_name</code>进行排序。</li>
<li>。如果<code>prod_price</code>列中所有的值都是唯一的，则不会对<code>prod_name</code>进行排序。</li>
</ul>
</li>
</ul>
<h2 id="指定排序方向"><a href="#指定排序方向" class="headerlink" title="指定排序方向"></a>指定排序方向</h2><ul>
<li><p>默认的排序方向是升序（A~Z）。</p>
</li>
<li><p>可以使用<code>ORDER BY</code> 子句以降序（Z~A）顺序排序，通过指定<code>DESC</code>关键字来实现。</p>
<p><img src="image-20230213162233008.png" srcset="/img/loading.gif" lazyload alt="image-20230213162233008"></p>
</li>
</ul>
<ul>
<li><p>对多个列进行排序的时候，<code>DESC</code> 关键字只应用到直接位于其前面的列名。</p>
<p><img src="image-20230213162453504.png" srcset="/img/loading.gif" lazyload alt="image-20230213162453504"></p>
</li>
</ul>
<ul>
<li>如果相对多个列进行降序排序，必须对每个列指定<code>DESC</code>关键字。</li>
</ul>
<ul>
<li>使用<code>ASC</code>关键字指定升序排序，但是默认就是升序排序，所以不用指定。</li>
</ul>
<ul>
<li>在字典（dictionary）排序顺序中，A被视为与a相同，这是MySQL（和大多数数据库管理系统）的默认行为。</li>
<li>但是，许多数据库管理员能够在需要时改变这种行为（如果你的数据库包含大量外语字符，可能必须这样做）。</li>
</ul>
<ul>
<li><p>使用<code>ORDER BY</code> 和 <code>LIMIT</code>的组合，可以找出一个列中最高或最低的值。</p>
<p><img src="image-20230213163004493.png" srcset="/img/loading.gif" lazyload alt="image-20230213163004493"></p>
</li>
<li><p><code>ORDER BY</code>子句必须是<code>SELECT</code>语句中的最后一条子句。</p>
</li>
</ul>
<h1 id="第6章-过滤数据"><a href="#第6章-过滤数据" class="headerlink" title="第6章 过滤数据"></a>第6章 过滤数据</h1><h2 id="使用WHERE-子句"><a href="#使用WHERE-子句" class="headerlink" title="使用WHERE 子句"></a>使用<code>WHERE</code> 子句</h2><ul>
<li><p>在<code>SELECT</code>语句中，数据根据<code>WHERE</code>子句中指定的条件进行过滤。</p>
<ul>
<li><code>WHERE</code>子句在表名（<code>FROM</code>子句）之后给出。</li>
</ul>
<p><img src="image-20230213182636141.png" srcset="/img/loading.gif" lazyload alt="image-20230213182636141"></p>
</li>
<li><p>同时使用<code>ORDER BY</code>和<code>WHERE</code>子句时，应该让<code>ORDER BY</code> 位于<code>WHERE</code>之后。</p>
</li>
</ul>
<h2 id="WHERE子句操作符"><a href="#WHERE子句操作符" class="headerlink" title="WHERE子句操作符"></a><code>WHERE</code>子句操作符</h2><ul>
<li><p>MySQL支持的所有条件操作符。</p>
<p><img src="image-20230213182937587.png" srcset="/img/loading.gif" lazyload alt="image-20230213182937587"></p>
</li>
</ul>
<h3 id="检查单个值"><a href="#检查单个值" class="headerlink" title="检查单个值"></a>检查单个值</h3><ul>
<li><p>单引号用来限定字符串。</p>
<ul>
<li>如果将值与字符串类型的列进行比较的时候，需要限定引号。</li>
<li>数值不需要。</li>
<li>MySQL默认在执行匹配的时候不区分大小写。</li>
</ul>
<p><img src="image-20230213183403543.png" srcset="/img/loading.gif" lazyload alt="image-20230213183403543"></p>
</li>
</ul>
<h3 id="不匹配检查"><a href="#不匹配检查" class="headerlink" title="不匹配检查"></a>不匹配检查</h3><ul>
<li><p>使用<code>&lt;&gt;</code>或<code>!=</code>来进行不匹配检查</p>
<p><img src="image-20230213183607970.png" srcset="/img/loading.gif" lazyload alt="image-20230213183607970"></p>
</li>
</ul>
<h3 id="范围值检查"><a href="#范围值检查" class="headerlink" title="范围值检查"></a>范围值检查</h3><ul>
<li><p>使用<code>BETWEEN</code>操作符，检查某个范围内的值。</p>
<ul>
<li>使用<code>BETWEEN</code>的时候必须指定两个值。</li>
<li><code>BETWEEN</code>匹配范围内的所有的值，包括指定的开始值和结束值。</li>
</ul>
<p><img src="image-20230213183800195.png" srcset="/img/loading.gif" lazyload alt="image-20230213183800195"></p>
</li>
</ul>
<h3 id="空值检查"><a href="#空值检查" class="headerlink" title="空值检查"></a>空值检查</h3><ul>
<li><p>创建表的时候，表的设计人员可以指定其中的列是否可以不包含值。</p>
<p>在一个列不包含值时，称其为包含空值<code>NULL</code>。</p>
</li>
</ul>
<ul>
<li><p><code>SELECT</code>语句有一个特殊的<code>WHERE</code>子句用来检查具有<code>NULL</code>值的列。</p>
</li>
<li><p>使用<code>IS NULL</code>子句来检查具有<code>NULL</code>值的列。</p>
<p><img src="image-20230213184346166.png" srcset="/img/loading.gif" lazyload alt="image-20230213184346166"></p>
<p><img src="image-20230213184518450-1676285119743-1.png" srcset="/img/loading.gif" lazyload alt="image-20230213184518450"></p>
</li>
</ul>
<ul>
<li>未知具有特殊的含义，数据库不知道它们是否匹配，所以在匹配的时候过滤或不匹配过滤时不返回它们。</li>
</ul>
<h1 id="第7章-数据过滤"><a href="#第7章-数据过滤" class="headerlink" title="第7章 数据过滤"></a>第7章 数据过滤</h1><h2 id="组合WHERE子句"><a href="#组合WHERE子句" class="headerlink" title="组合WHERE子句"></a>组合<code>WHERE</code>子句</h2><ul>
<li>MySQL允许给出多个<code>WHERE</code>子句。</li>
<li>多个子句通过两种方式进行使用：<ul>
<li><code>AND</code> 子句</li>
<li><code>OR</code>子句</li>
</ul>
</li>
</ul>
<h3 id="AND操作符"><a href="#AND操作符" class="headerlink" title="AND操作符"></a><code>AND</code>操作符</h3><ul>
<li><p>使用<code>AND</code>操作符给<code>WHERE</code>子句附加条件，来对多个列进行过滤。</p>
<p><img src="image-20230213185200735.png" srcset="/img/loading.gif" lazyload alt="image-20230213185200735"></p>
</li>
</ul>
<ul>
<li>还可以添加多个过滤条件，每添加一个条件就需要使用一个<code>AND</code>操作符。</li>
</ul>
<h3 id="OR操作符"><a href="#OR操作符" class="headerlink" title="OR操作符"></a><code>OR</code>操作符</h3><ul>
<li><p>使用<code>OR</code>操作符指示MySQL检索匹配任一条件的行。</p>
<p><img src="image-20230213185519109.png" srcset="/img/loading.gif" lazyload alt="image-20230213185519109"></p>
</li>
</ul>
<h3 id="计算次序"><a href="#计算次序" class="headerlink" title="计算次序"></a>计算次序</h3><ul>
<li><p><code>WHERE</code>可包含任意数目的<code>AND</code>和<code>OR</code>操作符。允许两者结合以进行复杂和高级的过滤。</p>
<ul>
<li>SQL（像多数语言一样）在处理<code>OR</code>操作符前，优先处理<code>AND</code>操作符。</li>
</ul>
<p><img src="image-20230213185835612.png" srcset="/img/loading.gif" lazyload alt="image-20230213185835612"></p>
</li>
<li><p>使用<code>()</code>(圆括号)明确地分组相应地操作符。</p>
<ul>
<li>圆括号具有较<code>AND</code>或<code>OR</code>操作符高的计算次序。</li>
</ul>
<p><img src="image-20230213190109228.png" srcset="/img/loading.gif" lazyload alt="image-20230213190109228"></p>
</li>
</ul>
<ul>
<li>任何时候使用具有<code>AND</code>和<code>OR</code>操作符的<code>WHERE</code>子句，都应该使用圆括号明确地分组操作符。<ul>
<li>不要过分依赖默认计算次序。</li>
</ul>
</li>
</ul>
<h2 id="IN-操作符"><a href="#IN-操作符" class="headerlink" title="IN 操作符"></a><code>IN</code> 操作符</h2><ul>
<li><p><code>IN</code>操作符用来指定条件范围，范围内的每个条件都可以进行匹配。</p>
<ul>
<li><code>IN</code>取合法值的清单（用逗号隔开），全都括在全括号中。</li>
</ul>
<p><img src="image-20230213190614339.png" srcset="/img/loading.gif" lazyload alt="image-20230213190614339"></p>
</li>
</ul>
<ul>
<li><code>IN</code> 操作符完成与<code>OR</code>相同的功能。</li>
<li>为什么使用<code>IN</code>操作符？<ul>
<li>使用长的合法选项清单的时候，使用<code>IN</code>操作符的语法更加<strong>清楚直观</strong>。</li>
<li>使用<code>IN</code>的时候，<strong>计算的次序更容易管理</strong>（使用的操作符更少）。</li>
<li><code>IN</code>操作符一般比<code>OR</code>操作符清单<strong>执行更快</strong>。</li>
<li><code>IN</code>的最大优点是可以包含其他<code>SELECT</code>语句，使得能够更动态地建立<code>WHERE</code>子句（14章）。</li>
</ul>
</li>
</ul>
<h2 id="NOT操作符"><a href="#NOT操作符" class="headerlink" title="NOT操作符"></a><code>NOT</code>操作符</h2><ul>
<li><p>使用<code>NOT</code>操作符，否定它之后所跟的任何条件。</p>
<p><img src="image-20230213191358538.png" srcset="/img/loading.gif" lazyload alt="image-20230213191358538"></p>
</li>
<li><p>在更复杂的子句中，<code>NOT</code>非常有用。</p>
<ul>
<li>如，与<code>IN</code>操作符联合使用时，<code>NOT</code>找出与条件列表不匹配的行非常简单。</li>
</ul>
</li>
</ul>
<ul>
<li>MySQL支持<code>NOT</code>对<code>IN</code>、<code>BETWEEN</code>和<code>EXISTS</code>子句取反。<ul>
<li>与多数其他DBMS允许使用<code>NOT</code>对各种条件取反有很大的差别。</li>
</ul>
</li>
</ul>
<h1 id="第8章-用通用符进行匹配"><a href="#第8章-用通用符进行匹配" class="headerlink" title="第8章 用通用符进行匹配"></a>第8章 用通用符进行匹配</h1><h2 id="LIKE操作符"><a href="#LIKE操作符" class="headerlink" title="LIKE操作符"></a><code>LIKE</code>操作符</h2><ul>
<li><p>前面的都是针对已知值进行过滤。</p>
</li>
<li><p>利用通配符可以创建比较特定的数据搜索模式。</p>
</li>
<li><p>通配符本身实际是SQL的<code>WHERE</code>子句中有特殊含义的字符，SQL支持几种通配符。</p>
<ul>
<li>从技术上来说，<code>LIKE</code>是谓词而不是操作符。</li>
</ul>
</li>
<li><p>为了使用通配符必须使用<code>LIKE</code>操作符。</p>
<ul>
<li><code>LIKE</code>指定MySQL，后跟的搜索模式利用通配符匹配而不是相等匹配进行比较。</li>
</ul>
</li>
</ul>
<h3 id="百分号-通配符"><a href="#百分号-通配符" class="headerlink" title="百分号%通配符"></a>百分号<code>%</code>通配符</h3><ul>
<li><p><code>%</code>表示任何字符出现任意次数。</p>
<p><img src="image-20230214154101280.png" srcset="/img/loading.gif" lazyload alt="image-20230214154101280"></p>
</li>
</ul>
<ul>
<li><p>通配符可以在搜索模式中任意位置使用，并且可以使用多个通配符。</p>
<p><img src="image-20230214154333150.png" srcset="/img/loading.gif" lazyload alt="image-20230214154333150"></p>
</li>
<li><p><code>%</code>代表搜索模式中给定位置的0个、1个或多个字符。</p>
</li>
</ul>
<ul>
<li>尾空格可能会干扰通配符匹配。</li>
</ul>
<ul>
<li><code>%</code>不能匹配值<code>NULL</code>。</li>
</ul>
<h3 id="下划线-通配符"><a href="#下划线-通配符" class="headerlink" title="下划线_通配符"></a>下划线<code>_</code>通配符</h3><ul>
<li><p>下划线只匹配单个字符。</p>
<p><img src="image-20230214154754890-1676360875965-1.png" srcset="/img/loading.gif" lazyload alt="image-20230214154754890"></p>
</li>
</ul>
<h2 id="使用通配符的技巧"><a href="#使用通配符的技巧" class="headerlink" title="使用通配符的技巧"></a>使用通配符的技巧</h2><ul>
<li>通配符搜索的处理一般要比前面讨论的其他搜索所花时间更长。<ul>
<li>不要过度使用通配符</li>
<li>除非有必要，否则不要放在搜索的开始处。最慢。</li>
<li>注意通配符的位置。</li>
</ul>
</li>
</ul>
<h1 id="第9章-使用正则表达式进行搜索"><a href="#第9章-使用正则表达式进行搜索" class="headerlink" title="第9章 使用正则表达式进行搜索"></a>第9章 使用正则表达式进行搜索</h1><h2 id="正则表达式介绍"><a href="#正则表达式介绍" class="headerlink" title="正则表达式介绍"></a>正则表达式介绍</h2><ul>
<li><p>随着过滤条件复杂性的增加，<code>WHERE</code>子句本身的复杂性也有必要增加。</p>
</li>
<li><p>正则表达式是用来匹配文本的特殊的串（字符集合）。</p>
</li>
</ul>
<h2 id="使用MySQL正则表达式"><a href="#使用MySQL正则表达式" class="headerlink" title="使用MySQL正则表达式"></a>使用MySQL正则表达式</h2><ul>
<li>MySQL用<code>WHERE</code>子句对正则表达式提供了初步的支持，允许你指定正则表达式， 过滤<code>SELECT</code>检索出的数据。</li>
</ul>
<h3 id="基本字符匹配"><a href="#基本字符匹配" class="headerlink" title="基本字符匹配"></a>基本字符匹配</h3><ul>
<li><p>使用<code>REGEXP</code>告诉MySQL其后所跟的东西作为正则表达式。</p>
<p><img src="image-20230214161029597.png" srcset="/img/loading.gif" lazyload alt="image-20230214161029597"></p>
</li>
</ul>
<ul>
<li><p><code>.</code>是正则表达式语言中一个特殊的字符，其表示可以<strong>匹配任意一个字符</strong>。</p>
<p><img src="image-20230214161218760.png" srcset="/img/loading.gif" lazyload alt="image-20230214161218760"></p>
</li>
</ul>
<ul>
<li><code>LIKE</code>匹配整个列。如果被匹配的文本在列值中出现，<code>LIKE</code>将不会找到它，相应的行也不被返回（除非使用<br>通配符）。</li>
<li>而<code>REGEXP</code>在列值内进行匹配，如果被匹配的文本在<strong>列值中出现</strong>，<code>REGEXP</code>将会找到它，相应的行将被返回。<ul>
<li>利用<code>^</code>和<code>$</code>定位符可以匹配整个列值。</li>
</ul>
</li>
</ul>
<ul>
<li>MySQL的正则表达式匹配不区分大小写。<ul>
<li>如果想区分大小写，可以使用<code>BINARY</code>关键字。</li>
</ul>
</li>
</ul>
<h3 id="进行OR匹配"><a href="#进行OR匹配" class="headerlink" title="进行OR匹配"></a>进行<code>OR</code>匹配</h3><ul>
<li><p>搜索两个串之一，使用<code>|</code>。</p>
<p><img src="image-20230214210600709.png" srcset="/img/loading.gif" lazyload alt="image-20230214210600709"></p>
</li>
<li><p>也可以是两个以上的<code>OR</code>条件。</p>
<p><img src="image-20230214210814146.png" srcset="/img/loading.gif" lazyload alt="image-20230214210814146"></p>
</li>
</ul>
<h3 id="匹配几个字符之一"><a href="#匹配几个字符之一" class="headerlink" title="匹配几个字符之一"></a>匹配几个字符之一</h3><ul>
<li><p>匹配任一字符，只想匹配特定的某些字符，使用一组<code>[</code>和<code>]</code>括起来的字符完成。</p>
<p><img src="image-20230214211114780.png" srcset="/img/loading.gif" lazyload alt="image-20230214211114780"></p>
</li>
<li><p><code>[]</code>是另一种形式的<code>OR</code>语句。</p>
</li>
<li><p>正则表达式<code>[123]Ton</code> 为 <code>[1|2|3]Ton</code>的缩写，也可以使用后者。</p>
<ul>
<li><p>除非把字符<code>|</code>括在一个集合中，否则它将应用于整个串。</p>
<p><img src="image-20230214211453735.png" srcset="/img/loading.gif" lazyload alt="image-20230214211453735"></p>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>字符集合也可以取否。在集合前放置<code>^</code>。</p>
<p><img src="image-20230214211724253.png" srcset="/img/loading.gif" lazyload alt="image-20230214211724253"></p>
</li>
</ul>
<h3 id="匹配范围"><a href="#匹配范围" class="headerlink" title="匹配范围"></a>匹配范围</h3><ul>
<li><p>简化类似<code>[0123456789]</code>这种类型的集合，使用<code>-</code>来定义一个范围。</p>
<ul>
<li><code>[0-9]</code>等价于<code>[0123456789]</code>。</li>
</ul>
<p><img src="image-20230214212212744.png" srcset="/img/loading.gif" lazyload alt="image-20230214212212744"></p>
</li>
</ul>
<ul>
<li>范围不一定是数值，<code>[a-z]</code>可以匹配任一字符。</li>
</ul>
<h3 id="匹配特殊字符"><a href="#匹配特殊字符" class="headerlink" title="匹配特殊字符"></a>匹配特殊字符</h3><ul>
<li><p>对所有被正则表达式赋予特殊含义的字符，如<code>.</code>，<code>[]</code>，<code>|</code>，<code>-</code>等，进行匹配的时候，使用前置转移符号<code>\\</code>。</p>
<p><img src="image-20230214212718266.png" srcset="/img/loading.gif" lazyload alt="image-20230214212718266"></p>
</li>
<li><p><code>\\</code>也可以用来引用元字符（具有特殊含义的字符）。</p>
<p><img src="image-20230215100226976.png" srcset="/img/loading.gif" lazyload alt="image-20230215100226976"></p>
</li>
<li><p>匹配<code>\</code>本身，使用<code>\\\</code>进行匹配。</p>
</li>
</ul>
<ul>
<li>多数正则表达式使用单个反斜杠转义特殊字符。</li>
<li>但MySQL要求两个反斜杠。<ul>
<li>MySQL自己解释一个，正则表达式库解释另一个。</li>
</ul>
</li>
</ul>
<h3 id="匹配字符类"><a href="#匹配字符类" class="headerlink" title="匹配字符类"></a>匹配字符类</h3><ul>
<li><p>为了方便，可以使用预定义的字符集，成为<em><strong>字符类</strong></em>。</p>
<p><img src="image-20230215100635147.png" srcset="/img/loading.gif" lazyload alt="image-20230215100635147"></p>
</li>
</ul>
<h3 id="匹配多个实例"><a href="#匹配多个实例" class="headerlink" title="匹配多个实例"></a>匹配多个实例</h3><ul>
<li><p>之前学习的所有正则表达式都试图匹配单词出现。</p>
</li>
<li><p>有时需要对匹配的数目进行更强的控制。</p>
</li>
<li><p>使用正则表达式的重复元字符。</p>
<p><img src="image-20230215100943840.png" srcset="/img/loading.gif" lazyload alt="image-20230215100943840"></p>
<ul>
<li><img src="image-20230215101444384.png" srcset="/img/loading.gif" lazyload alt="image-20230215101444384"><ul>
<li><code>sticks</code>匹配<code>stick</code>和<code>sticks</code>（<code>s</code>之后的<code>?</code>使得<code>s</code>可选，匹配0次或1次出现）。</li>
</ul>
</li>
<li><img src="image-20230215104751693.png" srcset="/img/loading.gif" lazyload alt="image-20230215104751693"><ul>
<li><code>[:digit:]</code>匹配任意数字，因而它为数字的一个集合。</li>
<li><code>&#123;4&#125;</code>确切地要求它前面的字符（任意数字）出现4次，所以 <code>[[:digit:]]&#123;4&#125;</code>匹配连在一起的任意4位数字。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="定位符"><a href="#定位符" class="headerlink" title="定位符"></a>定位符</h3><ul>
<li><p>匹配特定位置的文本，需要使用定位符。</p>
<p><img src="image-20230215152759174.png" srcset="/img/loading.gif" lazyload alt="image-20230215152759174"></p>
<p><img src="image-20230215153050493.png" srcset="/img/loading.gif" lazyload alt="image-20230215153050493"></p>
</li>
<li><p><code>^</code>有两种用法。</p>
<ul>
<li>在集合中用来否定该集合。</li>
<li>否则用来指定串的开始。</li>
</ul>
</li>
</ul>
<ul>
<li><code>LIKE</code> 匹配整个串而<code>REGEXP</code>匹配子串。<ul>
<li>利用定位符，用<code>^</code>开始每个表达式，用<code>$</code>结束每个表达式，可以使得<code>REGEXP</code>和<code>LIKE</code>的作用一样。</li>
</ul>
</li>
</ul>
<ul>
<li>可以不使用数据库表的请款你改下使用<code>SELECT</code>来测试正则表达式。<ul>
<li>如，<code>SELECT &#39;hello&#39; REGEXP &#39;[0-9]&#39;;</code></li>
</ul>
</li>
</ul>
<h1 id="第10章-创建计算字段"><a href="#第10章-创建计算字段" class="headerlink" title="第10章 创建计算字段"></a>第10章 创建计算字段</h1><h2 id="计算字段"><a href="#计算字段" class="headerlink" title="计算字段"></a>计算字段</h2><ul>
<li>存储在数据库表中的数据一般不是应用程序所需要的格式。</li>
</ul>
<ul>
<li>计算字段是运行时，在<code>SELECT</code>语句内创建的。<ul>
<li>基本上与column的意思相同。</li>
<li>只有数据库知道<code>SELECT</code>语句中哪些列是实际的表列，哪些是计算字段。</li>
</ul>
</li>
</ul>
<ul>
<li>SQL语句内完成的许多转换和格式化工作都可以直接在客户机应用程序内完成。<ul>
<li>一般来说，在数据库服务器上完成这些操作比在客户机中更快。</li>
</ul>
</li>
</ul>
<h2 id="拼接字段"><a href="#拼接字段" class="headerlink" title="拼接字段"></a>拼接字段</h2><ul>
<li><p>在MySQL的<code>SELECT</code>语句中，使用<code>Concat()</code>函数将两个列拼接起来。</p>
<ul>
<li>多数的DBMS使用<code>+</code>或<code>||</code>来实现拼接。</li>
<li>可以拼接多个串，串之间使用逗号<code>,</code>隔开。</li>
</ul>
<p><img src="image-20230215171301058.png" srcset="/img/loading.gif" lazyload alt="image-20230215171301058"></p>
</li>
</ul>
<ul>
<li><p>使用<code>RTrim()</code> 函数删除数据右侧多余的空格。</p>
<p><img src="image-20230215171736734.png" srcset="/img/loading.gif" lazyload alt="image-20230215171736734"></p>
</li>
<li><p>使用<code>LTrim()</code>删除串左边的空格。</p>
</li>
<li><p>使用<code>Trim()</code> 删除串左右两边的空格。</p>
</li>
</ul>
<h3 id="使用别名"><a href="#使用别名" class="headerlink" title="使用别名"></a>使用别名</h3><ul>
<li><p>使用别名是<strong>字段</strong>或是<strong>值</strong>的替换名。</p>
</li>
<li><p>使用<code>AS</code>关键字赋予别名。</p>
<p><img src="image-20230215204519245.png" srcset="/img/loading.gif" lazyload alt="image-20230215204519245"></p>
</li>
<li><p>别名还有其他用途。</p>
<ul>
<li>如，实际的表列名不符合规定的字符（如空格）时重新命名它。</li>
</ul>
</li>
</ul>
<ul>
<li>别名有时候也称为导出列。</li>
</ul>
<h2 id="执行算术计算"><a href="#执行算术计算" class="headerlink" title="执行算术计算"></a>执行算术计算</h2><ul>
<li><p>利用计算字段，对检索出的数据进行算术计算。</p>
<p><img src="image-20230215205129714.png" srcset="/img/loading.gif" lazyload alt="image-20230215205129714"></p>
</li>
<li><p>MySQL支持基本算术操作符。可以使用圆括号<code>()</code>来区分优先级。</p>
<p><img src="image-20230215205236673.png" srcset="/img/loading.gif" lazyload alt="image-20230215205236673"></p>
</li>
</ul>
<ul>
<li><p><code>SELECT</code>提供了测试和试验函数与计算的一个很好的方法。</p>
<p><img src="image-20230215205441093.png" srcset="/img/loading.gif" lazyload alt="image-20230215205441093"></p>
</li>
</ul>
<h1 id="第11章-使用数据处理函数"><a href="#第11章-使用数据处理函数" class="headerlink" title="第11章 使用数据处理函数"></a>第11章 使用数据处理函数</h1><h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><ul>
<li>函数在数据上执行，给数据的转换和处理提供了方便。</li>
</ul>
<h2 id="使用函数"><a href="#使用函数" class="headerlink" title="使用函数"></a>使用函数</h2><ul>
<li>大多数SQL支持的函数类型：<ul>
<li>处理文本</li>
<li>算术操作</li>
<li>处理日期和时间值</li>
<li>返回DBMS正在使用的特殊信息的系统函数。</li>
</ul>
</li>
</ul>
<h3 id="文本处理函数"><a href="#文本处理函数" class="headerlink" title="文本处理函数"></a>文本处理函数</h3><ul>
<li><p>使用<code>Upper()</code>函数将文本转化为大写。</p>
<p><img src="image-20230221132528720.png" srcset="/img/loading.gif" lazyload alt="image-20230221132528720"></p>
</li>
<li><p>常用的文本处理函数</p>
<p><img src="image-20230221132622247.png" srcset="/img/loading.gif" lazyload alt="image-20230221132622247"></p>
<p><img src="image-20230221132640852.png" srcset="/img/loading.gif" lazyload alt="image-20230221132640852"></p>
<ul>
<li><p><code>SOUNDEX</code>是一个将任何文本串转换为描述其语音表示的字母数字模式的算法。<code>SOUNDEX</code>不是SQL概念，MySQL（和多数DBMS）都提供支持。</p>
<ul>
<li>使用<code>SOUNDEX()</code>函数进行搜索，它匹配所有发音类似的结果。</li>
<li><img src="image-20230221133248225.png" srcset="/img/loading.gif" lazyload alt="image-20230221133248225"></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="日期和时间处理函数"><a href="#日期和时间处理函数" class="headerlink" title="日期和时间处理函数"></a>日期和时间处理函数</h3><ul>
<li><p>常用的日期和时间处理函数。</p>
<p><img src="image-20230221133711150.png" srcset="/img/loading.gif" lazyload alt="image-20230221133711150"></p>
</li>
</ul>
<ul>
<li>MySQL使用的日期格式必须是<code>yyyy-mm-dd</code>。<ul>
<li><img src="image-20230221134128897.png" srcset="/img/loading.gif" lazyload alt="image-20230221134128897"></li>
</ul>
</li>
</ul>
<ul>
<li><p>使用<code>Date()</code>函数，<code>Date(order_date)</code>指示MySQL仅提取列的日期部分。</p>
<ul>
<li><img src="image-20230221134510629.png" srcset="/img/loading.gif" lazyload alt="image-20230221134510629"></li>
</ul>
</li>
<li><p>使用<code>Time()</code>函数，仅提取列的时间部分。</p>
<ul>
<li><img src="image-20230221134755007.png" srcset="/img/loading.gif" lazyload alt="image-20230221134755007"></li>
</ul>
<ul>
<li>使用<code>BETWEEN</code>操作符匹配日期范围。或者使用更简洁的方式，利用<code>Year()</code>和<code>Month()</code>函数提取年月。<ul>
<li><img src="image-20230221135544563.png" srcset="/img/loading.gif" lazyload alt="image-20230221135544563"></li>
</ul>
</li>
</ul>
<h3 id="数值处理函数"><a href="#数值处理函数" class="headerlink" title="数值处理函数"></a>数值处理函数</h3><ul>
<li>数值处理函数仅处理数值数据。</li>
<li>数值处理函数没有串或日期-时间处理函数的使用那么频繁。</li>
</ul>
<ul>
<li>常用的数值处理函数。<ul>
<li><img src="image-20230221135806815.png" srcset="/img/loading.gif" lazyload alt="image-20230221135806815"></li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="第12章-汇总数据"><a href="#第12章-汇总数据" class="headerlink" title="第12章 汇总数据"></a>第12章 汇总数据</h1><h2 id="聚集函数"><a href="#聚集函数" class="headerlink" title="聚集函数"></a>聚集函数</h2><ul>
<li>MySQL提供了5个聚集函数。<ul>
<li>聚集函数：运行在行组上，计算和返回单个数值。</li>
<li><img src="image-20230221150320565.png" srcset="/img/loading.gif" lazyload alt="image-20230221150320565"></li>
<li>MySQL还支持一系列的标准偏差聚集函数。</li>
</ul>
</li>
</ul>
<h3 id="AVG-函数"><a href="#AVG-函数" class="headerlink" title="AVG()函数"></a><code>AVG()</code>函数</h3><ul>
<li><p>使用<code>AVG()</code>函数返回所有列的平均值，或是特定行或列的平均值。</p>
<ul>
<li><img src="image-20230221150550022.png" srcset="/img/loading.gif" lazyload alt="image-20230221150550022"></li>
<li><img src="image-20230221150724000.png" srcset="/img/loading.gif" lazyload alt="image-20230221150724000"><ul>
<li>使用<code>WHERE</code>子句过滤特定的行。</li>
</ul>
</li>
</ul>
</li>
<li><p><code>AVG()</code>只能用来确定特定数值列的平均值，且列名必须作为函数参数给出。</p>
</li>
<li><p>要获得多个列的平均值，必须使用多个<code>AVG()</code>函数。</p>
</li>
</ul>
<ul>
<li><code>AVG()</code>函数忽略列值为<code>NULL</code>的行。</li>
</ul>
<h3 id="COUNT-函数"><a href="#COUNT-函数" class="headerlink" title="COUNT()函数"></a><code>COUNT()</code>函数</h3><ul>
<li>使用<code>COUNT()</code>函数技术表中行的数目或是符合特定条件的行的数目。</li>
</ul>
<ul>
<li><code>COUNT()</code>两种使用方式：<ul>
<li>使用<code>COUNT(*)</code><ul>
<li>对表中行的数目进行计数，不管列中是否包含<code>NULL</code>值。</li>
</ul>
</li>
<li>使用<code>COUNT(column)</code><ul>
<li>对特定列中具有值的行进行计数，忽略<code>NULL</code>值。</li>
</ul>
</li>
<li><img src="image-20230221151531426.png" srcset="/img/loading.gif" lazyload alt="image-20230221151531426"></li>
<li><img src="image-20230221151708342.png" srcset="/img/loading.gif" lazyload alt="image-20230221151708342"></li>
</ul>
</li>
</ul>
<h3 id="MAX-函数"><a href="#MAX-函数" class="headerlink" title="MAX()函数"></a><code>MAX()</code>函数</h3><ul>
<li>使用<code>MAX()</code>函数返回指定列中的最大值。<ul>
<li><code>MAX()</code>必须指定列名。</li>
<li><img src="image-20230221152011233-1676964011784-71.png" srcset="/img/loading.gif" lazyload alt="image-20230221152011233"></li>
</ul>
</li>
</ul>
<ul>
<li><code>MAX()</code>一般用来找出最大的数值或日期值。</li>
<li>MySQL允许将<code>MAX()</code>用来返回任意列的最大值。<ul>
<li>包括文本列中的最大值。</li>
</ul>
</li>
</ul>
<ul>
<li><code>MAX()</code>忽略列值为<code>NULL</code>的行。</li>
</ul>
<h3 id="MIN-函数"><a href="#MIN-函数" class="headerlink" title="MIN()函数"></a><code>MIN()</code>函数</h3><ul>
<li>与<code>MAX()</code>函数正好功能相反。<ul>
<li><img src="image-20230221152439760-1676964280505-73.png" srcset="/img/loading.gif" lazyload alt="image-20230221152439760"></li>
</ul>
</li>
</ul>
<ul>
<li>MySQL允许将<code>MIN()</code>用来返回任意列的最小值。<ul>
<li>包括文本列中的最小值。</li>
</ul>
</li>
</ul>
<ul>
<li><code>MIN()</code>忽略列值为<code>NULL</code>的行。</li>
</ul>
<h3 id="SUM-函数"><a href="#SUM-函数" class="headerlink" title="SUM()函数"></a><code>SUM()</code>函数</h3><ul>
<li>使用<code>SUM()</code>函数来返回指定列值的和（总计）。<ul>
<li><img src="image-20230221152753440.png" srcset="/img/loading.gif" lazyload alt="image-20230221152753440"></li>
</ul>
</li>
</ul>
<ul>
<li><code>SUM()</code>也可以用来合计计算值。<ul>
<li><img src="image-20230221153035751.png" srcset="/img/loading.gif" lazyload alt="image-20230221153035751"></li>
</ul>
</li>
<li>利用标准的算术操作符，所有的聚集函数都可以用来执行多个列上的计算。<ul>
<li>如上例所示。<ul>
<li><code>SUM(item_price*quantity)</code>返回订单中所有物品价钱之和。</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li><code>SUM()</code>函数忽略值为<code>NULL</code>的行。</li>
</ul>
<h2 id="聚集不同值"><a href="#聚集不同值" class="headerlink" title="聚集不同值"></a>聚集不同值</h2><ul>
<li>对于5个聚集函数都可以如下使用：<ul>
<li>对所有的行指定操作<ul>
<li>指定<code>ALL</code>参数或不给参数（<code>ALL</code>是默认行为）。</li>
</ul>
</li>
<li>只包含不同的值，指定<code>DISTINCT</code>参数。</li>
</ul>
</li>
</ul>
<ul>
<li><code>ALL</code>参数是默认行为，不需要指定。</li>
<li>如果不指定<code>DISTINCT</code>，则假定为<code>ALL</code>。</li>
</ul>
<ul>
<li><img src="image-20230221154338294.png" srcset="/img/loading.gif" lazyload alt="image-20230221154338294"><ul>
<li>使用<code>DISTINCT</code>之后，具有相同价格的物品只留下一个。</li>
</ul>
</li>
<li><img src="image-20230221154540972.png" srcset="/img/loading.gif" lazyload alt="image-20230221154540972"></li>
</ul>
<ul>
<li>如果指定列名，则<code>DISTINCT</code>只能用于<code>COUNT()</code>。<code>DISTINCT</code>不能用于<code>COUNT(*)</code>，因此不允许使用<code>COUNT(DISTINCT)</code>。</li>
<li><code>DISTINCT</code>必须使用列名，不能用于计算或表达式。</li>
</ul>
<h2 id="组合聚集函数"><a href="#组合聚集函数" class="headerlink" title="组合聚集函数"></a>组合聚集函数</h2><ul>
<li><code>SELECT</code>语句可根据需要包含多个聚集函数。<ul>
<li><img src="image-20230221155055512.png" srcset="/img/loading.gif" lazyload alt="image-20230221155055512"></li>
<li>指定别名更便于理解和使用。</li>
</ul>
</li>
</ul>
<h1 id="第13章-分组数据"><a href="#第13章-分组数据" class="headerlink" title="第13章 分组数据"></a>第13章 分组数据</h1><h2 id="数据分组"><a href="#数据分组" class="headerlink" title="数据分组"></a>数据分组</h2><ul>
<li>分组允许把数据分为多个逻辑组，以便能对每个组进行聚集计算。</li>
</ul>
<h2 id="创建分组"><a href="#创建分组" class="headerlink" title="创建分组"></a>创建分组</h2><ul>
<li>分组是使用<code>SELECT</code>语句的<code>GROUP BY</code>子句中建立的。<ul>
<li><img src="image-20230224172820327.png" srcset="/img/loading.gif" lazyload alt="image-20230224172820327"></li>
<li><code>GROUP BY</code>子句指示MySQL按<code>vend_id</code>排序并分组数据。</li>
<li>这导致对每个<code>vend_id</code>而不是整个表计算<code>num_prods</code>一次。</li>
</ul>
</li>
</ul>
<ul>
<li><code>GROUP BY</code>子句指示MySQL分组数据，然后对每个组而不是整个结果集进行聚集。</li>
<li>一些重要的规定。<ul>
<li><code>GROUP BY</code>子句可以包含任意数目的列。</li>
<li>如果在<code>GROUP BY</code>子句中嵌套了分组，数据将在最后规定的分组上进行汇总。</li>
<li><code>GROUP BY</code>子句中列出的每个列都必须是检索列或是有效的表达式（不能是聚集函数）。如果在<code>SELECT</code>中使用表达式，则必须在<code>GROUP BY</code>子句中指定相同的表达式。不能使用别名。</li>
<li>除聚集计算语句外，<code>SELECT</code>语句中的每个列都必须在<code>GROUP BY</code>子句中给出。</li>
<li>分组列中具有<code>NULL</code>值，则<code>NULL</code>将作为一个分组返回。若列中有多行<code>NULL</code>值，则将其都作为一组。</li>
<li><code>GROUP BY</code>子句必须出现在<code>WHERE</code>子句之后，<code>ORDER BY</code>子句之前。</li>
</ul>
</li>
</ul>
<ul>
<li><p>使用<code>WITH ROLLUP</code>关键字，得到每个分组以及每个分组<strong>汇总</strong>级别（针对每个分组）的值。</p>
<ul>
<li><img src="image-20230227151830658-1677482311580-1.png" srcset="/img/loading.gif" lazyload alt="image-20230227151830658"></li>
</ul>
</li>
</ul>
<h2 id="过滤分组"><a href="#过滤分组" class="headerlink" title="过滤分组"></a>过滤分组</h2><ul>
<li><code>WHERE</code>过滤的是行而不是分组。<code>WHERE</code>并没有分组的概念。</li>
</ul>
<ul>
<li>使用<code>HAVING</code>子句过滤分组。<ul>
<li><code>HAVING</code>支持所有<code>WHERE</code>操作符</li>
<li><img src="image-20230227152452607.png" srcset="/img/loading.gif" lazyload alt="image-20230227152452607"></li>
</ul>
</li>
</ul>
<ul>
<li><code>WHERE</code>实在数据分组前进行过滤，<code>HAVING</code>在数据分组后进行过滤。<ul>
<li><img src="image-20230227152736813.png" srcset="/img/loading.gif" lazyload alt="image-20230227152736813"></li>
<li><img src="image-20230227152909644.png" srcset="/img/loading.gif" lazyload alt="image-20230227152909644"></li>
</ul>
</li>
</ul>
<h2 id="分组和排序"><a href="#分组和排序" class="headerlink" title="分组和排序"></a>分组和排序</h2><ul>
<li><code>GROUP BY</code> 和 <code>ORDER BY</code> 的区别。<ul>
<li><img src="image-20230227153033992.png" srcset="/img/loading.gif" lazyload alt="image-20230227153033992"></li>
</ul>
</li>
</ul>
<ul>
<li>一般使用<code>GROUP BY</code>子句的时候，也应该给出<code>ORDER BY</code>子句。<ul>
<li>这是保证数据正确排序的唯一方法。</li>
<li>不要依赖<code>GROUP BY</code>排序数据。</li>
<li><img src="image-20230227153359036-1677483239970-3.png" srcset="/img/loading.gif" lazyload alt="image-20230227153359036"></li>
<li><img src="image-20230227153413474.png" srcset="/img/loading.gif" lazyload alt="image-20230227153413474"></li>
</ul>
</li>
</ul>
<h2 id="SELECT子句顺序"><a href="#SELECT子句顺序" class="headerlink" title="SELECT子句顺序"></a><code>SELECT</code>子句顺序</h2><ul>
<li>在<code>SELECT</code>语句中必须遵循的次序。<ul>
<li><img src="image-20230227153554259.png" srcset="/img/loading.gif" lazyload alt="image-20230227153554259"></li>
<li><img src="image-20230227153627374.png" srcset="/img/loading.gif" lazyload alt="image-20230227153627374"></li>
</ul>
</li>
</ul>
<h1 id="第14章-使用子查询"><a href="#第14章-使用子查询" class="headerlink" title="第14章 使用子查询"></a>第14章 使用子查询</h1><h2 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h2><ul>
<li>任何SQL语句都是查询。</li>
</ul>
<ul>
<li>子查询，即嵌套在其他查询中的查询。</li>
</ul>
<h2 id="利用子查询进行过滤"><a href="#利用子查询进行过滤" class="headerlink" title="利用子查询进行过滤"></a>利用子查询进行过滤</h2><ul>
<li><p>可以讲一条<code>SELECT</code>语句返回的结果用于另一条<code>SELECT</code>语句的<code>WHERE</code>子句。</p>
<ul>
<li><p><img src="image-20230301170843798.png" srcset="/img/loading.gif" lazyload alt="image-20230301170843798"></p>
<p><img src="image-20230301170855337.png" srcset="/img/loading.gif" lazyload alt="image-20230301170855337"></p>
</li>
<li><p>组合两个查询为一个。</p>
<p><img src="image-20230301171013381.png" srcset="/img/loading.gif" lazyload alt="image-20230301171013381"></p>
</li>
<li><p><code>SELECT</code>语句中，子查询总是由内向外处理。</p>
<ul>
<li>先处理子查询，再将子查询的结果作为<code>WHERE</code>的条件</li>
</ul>
</li>
<li><p><img src="image-20230301171313853.png" srcset="/img/loading.gif" lazyload alt="image-20230301171313853"></p>
</li>
<li><p>合并三个子查询</p>
<p><img src="image-20230301171518251-1677662119109-1.png" srcset="/img/loading.gif" lazyload alt="image-20230301171518251"></p>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>在<code>WHERE</code>子句中使用子查询，应当保证<code>SELECT</code>语句具有与<code>WHERE</code>子句中<strong>相同数目的列</strong>。</p>
<ul>
<li>通常单个列与单个列匹配。</li>
<li>如果需要可以使用多个列。</li>
</ul>
</li>
<li><p>子查询一般与<code>IN</code>操作符结合使用，但也可以用于测试等于 <code>=</code>、不等于<code>&lt;&gt;</code>等。</p>
</li>
</ul>
<h2 id="作为计算字段使用子查询"><a href="#作为计算字段使用子查询" class="headerlink" title="作为计算字段使用子查询"></a>作为计算字段使用子查询</h2><ul>
<li>使用子查询创建计算字段。<ul>
<li><img src="image-20230301172720577.png" srcset="/img/loading.gif" lazyload alt="image-20230301172720577"><ul>
<li><code>orders</code>是一个计算字段，是由圆括号中的子查询建立的。该子查询对检索出的每个客户执行一次。</li>
<li>子查询中的<code>WHERE</code>子句使用了完全限定列名。</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li>涉及外部查询的子查询成为<strong>相关子查询</strong>。<ul>
<li>如上例的查询。</li>
<li>任何时候只要列名可能有多义性的时候，必须使用这种语法（完全限定列名）。</li>
</ul>
</li>
</ul>
<h1 id="第15章-联结表"><a href="#第15章-联结表" class="headerlink" title="第15章 联结表"></a>第15章 联结表</h1><h2 id="联结"><a href="#联结" class="headerlink" title="联结"></a>联结</h2><ul>
<li>SQL最强大的功能之一：数据检索查询的执行中联结表。<ul>
<li>联结是利用SQL的<code>SELECT</code>能执行的最重要的操作。</li>
</ul>
</li>
</ul>
<h3 id="关系表"><a href="#关系表" class="headerlink" title="关系表"></a>关系表</h3><ul>
<li>相同数据出现多次决不是一件好事，该因素是关系数据库设计的基础。<ul>
<li>关系表的实际就是要保证把信息分解成多个表，一类数据一个表。    </li>
<li>各表通过某些常用的值（即关系涉及中的<strong>关系</strong>）互相关联。</li>
</ul>
</li>
</ul>
<ul>
<li>主键可以唯一表示一行。</li>
</ul>
<ul>
<li>外键为某个表中的一列，包含另一个表的主键值。</li>
</ul>
<ul>
<li>可伸缩性（scale）：可以适应不断增加的工作量而不失败。</li>
</ul>
<h3 id="为什么要使用联结"><a href="#为什么要使用联结" class="headerlink" title="为什么要使用联结"></a>为什么要使用联结</h3><ul>
<li>分解数据为多个表能够更有效地存储，更方便地处理，并且具有更大的可伸缩性。<ul>
<li>但是好处是有代价的。</li>
<li>将数据存储在多个表中，需要使用联结才能在单条<code>SELECT</code>语句检索出数据。</li>
</ul>
</li>
</ul>
<ul>
<li>联结是一种机制，用来在一条<code>SELECT</code>语句中关联表，因此称之为联结。<ul>
<li>使用特殊的语法，可以联结多个返回一组输出，联结在运行时关联表中正确的行。</li>
</ul>
</li>
</ul>
<ul>
<li>联结不是物理实体，在实际的数据库表中不存在。</li>
<li>联结由MySQL根据需要建立，它存在于查询的执行当中。<ul>
<li>需要在表的定义中指定主键和外键来维护引用完整性。</li>
</ul>
</li>
</ul>
<h2 id="创建联结"><a href="#创建联结" class="headerlink" title="创建联结"></a>创建联结</h2><ul>
<li>创建联结非常简单，规定要联结的所有<strong>表</strong>以及如何<strong>关联</strong>即可。<ul>
<li><img src="image-20230301205721502.png" srcset="/img/loading.gif" lazyload alt="image-20230301205721502"></li>
<li>为了匹配来自不同表中的两个列，需要使用完全限定名。</li>
</ul>
</li>
</ul>
<h3 id="WHERE子句的重要性"><a href="#WHERE子句的重要性" class="headerlink" title="WHERE子句的重要性"></a><code>WHERE</code>子句的重要性</h3><ul>
<li>利用<code>WHERE</code>子句建立联结关系。<ul>
<li><code>WHERE</code>子句作为过滤条件，它只包含那些匹配给定条件（联结条件）的行。</li>
</ul>
</li>
<li>如果不使用<code>WHERE</code>子句（没有联结条件的表关系）返回的结果是<strong>笛卡尔积</strong>。</li>
</ul>
<ul>
<li>应当保证所有的联结都有<code>WHERE</code>子句。</li>
</ul>
<h3 id="内部联结"><a href="#内部联结" class="headerlink" title="内部联结"></a>内部联结</h3><ul>
<li>目前所用的都是<strong>等值联结</strong>。<ul>
<li>基于两个表之间的相等测试。</li>
<li>也成为<strong>内部联结</strong>。</li>
</ul>
</li>
<li>可以使用稍微不同的语法来明确联结的类型。<ul>
<li>用<code>INNER JOIN</code>指定表，使用<code>ON</code>子句给定条件。</li>
<li><img src="image-20230306192630117.png" srcset="/img/loading.gif" lazyload alt="image-20230306192630117"></li>
</ul>
</li>
</ul>
<ul>
<li>ANSI SQL首选<code>INNER JOIN</code>语法。</li>
</ul>
<h3 id="联结多个表"><a href="#联结多个表" class="headerlink" title="联结多个表"></a>联结多个表</h3><ul>
<li>SQL对一条<code>SELECT</code>语句中可以联结的表的数目没有限制。<ul>
<li>创建联结的规则基本相同。首先列出表，再定义表之间的关系。</li>
<li><img src="image-20230306193356491.png" srcset="/img/loading.gif" lazyload alt="image-20230306193356491" style="zoom:67%;" /></li>
</ul>
</li>
</ul>
<h1 id="第16章-创建高级联结"><a href="#第16章-创建高级联结" class="headerlink" title="第16章 创建高级联结"></a>第16章 创建高级联结</h1><h2 id="使用表别名"><a href="#使用表别名" class="headerlink" title="使用表别名"></a>使用表别名</h2><ul>
<li>SQL允许给表取别名。<ul>
<li>表别名只在查询执行中使用。</li>
</ul>
</li>
</ul>
<h2 id="使用不同类型的联结"><a href="#使用不同类型的联结" class="headerlink" title="使用不同类型的联结"></a>使用不同类型的联结</h2><h3 id="自联结"><a href="#自联结" class="headerlink" title="自联结"></a>自联结</h3><ul>
<li>能在单条<code>SELECT</code>语句中不止一次引用相同的表。<ul>
<li><img src="image-20230316200857452.png" srcset="/img/loading.gif" lazyload alt="image-20230316200857452"></li>
<li><img src="image-20230316200912066.png" srcset="/img/loading.gif" lazyload alt="image-20230316200912066"></li>
</ul>
</li>
</ul>
<h3 id="自然联结"><a href="#自然联结" class="headerlink" title="自然联结"></a>自然联结</h3><ul>
<li>自然联结排除多次出现，使得每个<strong>列</strong>只返回一次。</li>
</ul>
<ul>
<li>自然联结中，只能选择那些唯一的列。<ul>
<li>一般是通过对表使用通配符（<code>SELECT *</code>），对所有其他表的列使用明确的子集来完成。</li>
<li><img src="image-20230316201253071.png" srcset="/img/loading.gif" lazyload alt="image-20230316201253071"></li>
</ul>
</li>
</ul>
<h3 id="外部联结"><a href="#外部联结" class="headerlink" title="外部联结"></a>外部联结</h3><ul>
<li>联结包含了那些在相关表中没有关联的行，称为外部联结。</li>
</ul>
<ul>
<li>内部联结<code>INNER JOIN</code>。<ul>
<li><img src="image-20230316201557304.png" srcset="/img/loading.gif" lazyload alt="image-20230316201557304"></li>
</ul>
</li>
<li>外部联结<code>OUTER JOIN</code>。必须指定是<code>LEFT OUTER JOIN</code>还是<code>RIGHT OUTER JOIN</code>。<ul>
<li>上面的例子使用<code>LEFT OUTER JOIN</code>从<code>FROM</code>子句的左边表（<code>customers</code>表）中选择所有行。</li>
<li>为了从右边的表中选择所有行，应该使用<code>RIGHT OUTER JOIN</code>。<ul>
<li><img src="image-20230316201904461.png" srcset="/img/loading.gif" lazyload alt="image-20230316201904461"></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="使用带聚集函数的联结"><a href="#使用带聚集函数的联结" class="headerlink" title="使用带聚集函数的联结"></a>使用带聚集函数的联结</h2><ul>
<li>聚集函数可以和联结一起使用。<ul>
<li><img src="image-20230316202244780.png" srcset="/img/loading.gif" lazyload alt="image-20230316202244780"></li>
<li><img src="image-20230316202321627.png" srcset="/img/loading.gif" lazyload alt="image-20230316202321627"></li>
</ul>
</li>
</ul>
<h1 id="第17章-组合查询"><a href="#第17章-组合查询" class="headerlink" title="第17章 组合查询"></a>第17章 组合查询</h1><h2 id="组合查询"><a href="#组合查询" class="headerlink" title="组合查询"></a>组合查询</h2><ul>
<li>MySQL允许执行多个查询（多条<code>SELECT</code>语句），并将结果作为单个查询结果集返回。这种组合查询称为<strong>并</strong>或是<strong>复合查询</strong>。</li>
</ul>
<h2 id="创建组合查询"><a href="#创建组合查询" class="headerlink" title="创建组合查询"></a>创建组合查询</h2><ul>
<li>使用<code>UNION</code>操作符来组合数条SQL查询。</li>
</ul>
<h3 id="使用UNION"><a href="#使用UNION" class="headerlink" title="使用UNION"></a>使用<code>UNION</code></h3><ul>
<li>给出每条<code>SELECT</code>语句，在各条语句之间放上关键字<code>UNION</code>。<ul>
<li><img src="image-20230316203128822.png" srcset="/img/loading.gif" lazyload alt="image-20230316203128822"></li>
<li><code>UNION</code>指示MySQL执行两条<code>SELECT</code>语句，并把输出组合成单个查询结果集。</li>
<li><img src="image-20230316203225310.png" srcset="/img/loading.gif" lazyload alt="image-20230316203225310"></li>
</ul>
</li>
</ul>
<h3 id="UNION规则"><a href="#UNION规则" class="headerlink" title="UNION规则"></a><code>UNION</code>规则</h3><ul>
<li>必须两条或是两条以上的<code>SELECT</code>语句组成，语句之间使用<code>UNION</code>分隔。</li>
<li><code>UNION</code>中的每个查询必须包含相同的列、表达式或聚集函数。<ul>
<li>每个列不需要以相同的次序列出。</li>
</ul>
</li>
<li>列的数据类型必须兼容。不必完全相同，但必须是DBMS可以隐含地转换的类型。</li>
</ul>
<h3 id="包含或取消重复的行"><a href="#包含或取消重复的行" class="headerlink" title="包含或取消重复的行"></a>包含或取消重复的行</h3><ul>
<li><code>UNION</code>从查询结果集中自动去除了重复的行。<ul>
<li>与单条<code>SELECT</code>语句使用多个<code>WHERE</code>子句条件一样。</li>
</ul>
</li>
</ul>
<ul>
<li><p>使用<code>UNION ALL</code>返回所有匹配行。</p>
<ul>
<li><p><img src="image-20230316203803130.png" srcset="/img/loading.gif" lazyload alt="image-20230316203803130"></p>
</li>
<li><p>使用<code>UNION ALL</code>，MySQL不取消重复的行。</p>
</li>
</ul>
</li>
</ul>
<h3 id="对组合查询结果排序"><a href="#对组合查询结果排序" class="headerlink" title="对组合查询结果排序"></a>对组合查询结果排序</h3><ul>
<li><p>使用<code>UNION</code>组合查询时，只能使用一条<code>ORDER BY</code>子句，并且必须出现在最后一条<code>SELECT</code>语句之后。</p>
<ul>
<li>对于结果集，不存在用一种方式排序一部分，而又用另一种方式排序另一 部分的情况，因此不允许使用多条<code>ORDER BY</code>子句。</li>
<li><img src="image-20230316204143033.png" srcset="/img/loading.gif" lazyload alt="image-20230316204143033"></li>
</ul>
</li>
</ul>
<h1 id="第18章-全文本搜索"><a href="#第18章-全文本搜索" class="headerlink" title="第18章 全文本搜索"></a>第18章 全文本搜索</h1><h2 id="理解全文本搜索"><a href="#理解全文本搜索" class="headerlink" title="理解全文本搜索"></a>理解全文本搜索</h2><ul>
<li>最常使用的两个引擎MyISAM和InnoDB。<ul>
<li>前者支持全文本搜索。</li>
<li>后者不支持。</li>
</ul>
</li>
<li>使用全文本搜索时，MySQL不需要分别查看每个行，不需要分别分析和处理每个词。</li>
</ul>
<h2 id="使用全文本搜索"><a href="#使用全文本搜索" class="headerlink" title="使用全文本搜索"></a>使用全文本搜索</h2><ul>
<li>为了进行全文本搜索，必须索引被搜索的列，而且要随着数据的改变不断地重新索引。<ul>
<li>在对表列进行适当设计后，MySQL会自动进行所有的索引和重新索引。</li>
</ul>
</li>
</ul>
<h3 id="启用全文本搜索支持"><a href="#启用全文本搜索支持" class="headerlink" title="启用全文本搜索支持"></a>启用全文本搜索支持</h3><ul>
<li>一般在创建表时启动全文本搜索。</li>
<li><code>CREATE TABLE</code>语句接收<code>FULLTEXT</code>子句，给出被索引列。<ul>
<li><img src="image-20230317193404320.png" srcset="/img/loading.gif" lazyload alt="image-20230317193404320"></li>
<li>定义之后，MySQL自动维护该索引。</li>
</ul>
</li>
<li>可以在创建表时指定<code>FULLTEXT</code>，或者在稍后指定。</li>
<li>不要在导入数据的时候使用<code>FULLTEXT</code>。慢。</li>
</ul>
<h3 id="进行全文本搜索"><a href="#进行全文本搜索" class="headerlink" title="进行全文本搜索"></a>进行全文本搜索</h3><ul>
<li>在索引之后，使用函数<code>Match()</code>和<code>Against()</code>执行全文本搜索。<ul>
<li><code>Match()</code>指定被搜索的列。</li>
<li><code>Against()</code>指定要使用的搜索表达式。<ul>
<li><img src="image-20230317193823312.png" srcset="/img/loading.gif" lazyload alt="image-20230317193823312"></li>
</ul>
</li>
</ul>
</li>
<li>传递给<code>Match()</code>的值必须与<code>FULLTEXT()</code>定义中的相同。<ul>
<li>指定多个列，必须列出它们，并且次序正确。</li>
</ul>
</li>
<li>全文本搜索不区分大小写。除非使用<code>BINARY</code>方式。</li>
</ul>
<ul>
<li>使用全文本搜索返回以文本匹配的良好程度排序的数据。<ul>
<li>具有较高登记的行先返回。<ul>
<li>如，两个行都包含词rabbit，但包含词rabbit作为第3个词的行的等级比作为第20个词的行高。</li>
<li><img src="image-20230317194344281.png" srcset="/img/loading.gif" lazyload alt="image-20230317194344281"></li>
<li>等级由MySQL根据行中词的数目、唯一词的数目、整个索引中词的总数以及包含该词的行的数目计算出来。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="使用查询扩展"><a href="#使用查询扩展" class="headerlink" title="使用查询扩展"></a>使用查询扩展</h3><ul>
<li>查询扩展用来设法放宽返回的文本搜索结果的范围。</li>
<li>利用查询扩展，能找出可能相关的结果，即使它们并不精确包含所查找的词。<ul>
<li><img src="image-20230317194702084.png" srcset="/img/loading.gif" lazyload alt="image-20230317194702084"></li>
<li>查询扩展极大地增加了返回地行数。</li>
<li>表中地行越多（行中地文本越多），使用查询扩展返回的结果越好。</li>
</ul>
</li>
</ul>
<h3 id="布尔文本搜索"><a href="#布尔文本搜索" class="headerlink" title="布尔文本搜索"></a>布尔文本搜索</h3><ul>
<li>全文本搜索的另一种形式。布尔方式。</li>
</ul>
<ul>
<li>即使没有<code>FULLTEXT</code>索引也可以使用布尔方式。<ul>
<li><img src="image-20230317195056982.png" srcset="/img/loading.gif" lazyload alt="image-20230317195056982"></li>
<li><img src="image-20230317195219700.png" srcset="/img/loading.gif" lazyload alt="image-20230317195219700"></li>
</ul>
</li>
</ul>
<ul>
<li>全文本搜索布尔操作符。<ul>
<li><code>-</code>排除一个词。</li>
<li><code>*</code>阶段操作符。可以想象为词尾的一个通配符。</li>
<li><img src="image-20230317195330841.png" srcset="/img/loading.gif" lazyload alt="image-20230317195330841"></li>
</ul>
</li>
</ul>
<h3 id="全文本搜索的使用说明"><a href="#全文本搜索的使用说明" class="headerlink" title="全文本搜索的使用说明"></a>全文本搜索的使用说明</h3><ul>
<li>在索引全文本数据时，短语被忽略且从索引中排除。</li>
<li>MySQL带有一个内建的非用词列表，这些词在索引全文本数据时总是被忽略。</li>
<li>50%规则。如果一个词出现在50%以上的行中，则将它作为一个非用词忽略。</li>
<li>表中的行数小于3行，则全文本搜索不返回结果。</li>
<li>忽略词中的单引号。</li>
<li>不具有词分隔符（包括日语和汉语）的语言不能恰当地返回全文本搜索结果。</li>
<li>仅在MyISAM数据库引擎中支持全文本搜索。</li>
</ul>
<h1 id="第19章-插入数据"><a href="#第19章-插入数据" class="headerlink" title="第19章 插入数据"></a>第19章 插入数据</h1><h2 id="数据插入"><a href="#数据插入" class="headerlink" title="数据插入"></a>数据插入</h2><ul>
<li><code>SELECT</code>是最常使用的SQL语句。</li>
<li>其余三个语句。首先就是<code>INSERT</code>。</li>
</ul>
<ul>
<li><p><code>INSERT</code>用来插入（或添加）行到数据库表的。</p>
<ul>
<li>可以插入：<ul>
<li>完整行</li>
<li>行的一部分</li>
<li>多行</li>
<li>某些查询结果。</li>
</ul>
</li>
</ul>
</li>
<li><p>可针对每个表或是每个用户，利用MySQL的安全机制禁止使用<code>INSERT</code>语句。</p>
</li>
</ul>
<h2 id="插入完整的行"><a href="#插入完整的行" class="headerlink" title="插入完整的行"></a>插入完整的行</h2><ul>
<li><code>INSERT INTO table_name VALUES(attribute...);</code><ul>
<li><img src="image-20230317200730200.png" srcset="/img/loading.gif" lazyload alt="image-20230317200730200"></li>
<li><code>INSERT</code>语句一般不会产生输出。</li>
</ul>
</li>
<li>存储到表中每个列的数据必须在<code>VALUES</code>子句中给出，对每个列必须提供一个值。<ul>
<li>如果没有值，应该使用<code>NULL</code>。</li>
<li>每个列必须以在表定义中出现的次序填充。</li>
<li>第一列也为<code>NULL</code>。MySQL每次插入一个新行时，该列由MySQL自动增量。</li>
</ul>
</li>
</ul>
<ul>
<li>语法简单。不安全。尽量避免使用。<ul>
<li>编写依赖特定列次序的SQL语句是不安全的。</li>
</ul>
</li>
</ul>
<ul>
<li><p>可以显示提供列名。但是繁琐。</p>
<ul>
<li><p><img src="image-20230317201701651.png" srcset="/img/loading.gif" lazyload alt="image-20230317201701651"></p>
<p><img src="image-20230317201713187.png" srcset="/img/loading.gif" lazyload alt="image-20230317201713187"></p>
</li>
<li><p>因为提供了列名，<code>VALUES</code>必须以其指定的次序匹配指定的列名，不一定按各个列出现在实际表中的次序。</p>
</li>
<li><p>即使表的结构改变，此<code>INSERT</code>语句仍然能正确工作。</p>
</li>
</ul>
</li>
</ul>
<ul>
<li>一般不要使用没有明确给出列的列表的<code>INSERT</code>语句。<ul>
<li>使用这种语法，还可以省略列。这表示可以只给某些列提供值，给其他列不提供值。</li>
<li>省略列必须满足的条件。<ul>
<li>允许<code>NULL</code>值（无值或空值）。</li>
<li>表定义中给出默认值。</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li><code>INSERT</code>操作可能很耗时，而且可能降低等待处理的<code>SELECT</code>语句的性能。<ul>
<li>可以通过在<code>INSERT</code>和<code>INTO</code>之间添加关键字<code>LOW_PRIORITY</code>，指示MySQL降低<code>INSERT</code>语句的优先级。<ul>
<li><code>INSERT LOW_PRIORITY INTO</code>。</li>
<li>同样适用于接下来介绍的<code>UPDATE</code>和<code>DELETE</code>语句。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="插入多个行"><a href="#插入多个行" class="headerlink" title="插入多个行"></a>插入多个行</h3><ul>
<li><p>可以使用多条INSERT语句，甚至一次提交它们，每条语句用一个分号结束。</p>
<ul>
<li><img src="image-20230317203929480.png" srcset="/img/loading.gif" lazyload alt="image-20230317203929480"></li>
</ul>
</li>
<li><p>只要每条INSERT语句中的列名（和次序）相同。合并语句。</p>
<ul>
<li><p><img src="image-20230317204000095.png" srcset="/img/loading.gif" lazyload alt="image-20230317204000095"></p>
<p><img src="image-20230317204013875.png" srcset="/img/loading.gif" lazyload alt="image-20230317204013875"></p>
<ul>
<li>其中单条<code>INSERT</code>语句有多组值，每组值用一对圆括号括起来，用逗号分隔。</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li>MySQL用单条<code>INSERT</code>语句处理多个插入比使用多条<code>INSERT</code>语句快。</li>
</ul>
<h3 id="插入检索出的数据"><a href="#插入检索出的数据" class="headerlink" title="插入检索出的数据"></a>插入检索出的数据</h3><ul>
<li><code>INSERT TNTO table_name(attribute...) SELECT ...</code></li>
<li>在<code>INSERT SELECT</code>中，<code>SELECT</code>语句可包含<code>WHERE</code>子句以过滤插入的数据。</li>
</ul>
<h1 id="第20章-更新和删除数据"><a href="#第20章-更新和删除数据" class="headerlink" title="第20章 更新和删除数据"></a>第20章 更新和删除数据</h1><h2 id="更新数据"><a href="#更新数据" class="headerlink" title="更新数据"></a>更新数据</h2><ul>
<li>使用<code>UPDATE</code>语句更新（修改）表中的数据。两种方式使用<code>UPDATE</code>：<ul>
<li>更新表中特定行。</li>
<li>更新表中所有行。</li>
</ul>
</li>
</ul>
<ul>
<li>不要省略<code>WHERE</code>子句。稍不注意就会更新表中的所有行。</li>
</ul>
<ul>
<li><p><code>UPDATE</code>语句使用:</p>
<ul>
<li>```sql<br>UPDATE table_name<br>SET attribute_name = ‘new value’<br>WHERE attribute_name = ‘target row’;<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><br>  - ![image-20230322200132060](image-20230322200132060.png)<br><br>  - `<span class="hljs-keyword">UPDATE</span><span class="hljs-symbol">`语句总是以要更新的表的名字开始。</span><br><span class="hljs-symbol"></span><br><span class="hljs-symbol">  - `</span><span class="hljs-keyword">SET</span><span class="hljs-symbol">`命令用来将新值赋给被更新的列。</span><br><span class="hljs-symbol"></span><br><span class="hljs-symbol">  - `</span><span class="hljs-keyword">UPDATE</span><span class="hljs-symbol">`语句以`</span><span class="hljs-keyword">WHERE</span><span class="hljs-symbol">`子句结束，它告诉MySQL更新哪一行。</span><br><span class="hljs-symbol"></span><br><span class="hljs-symbol"></span><br><span class="hljs-symbol"></span><br><span class="hljs-symbol">- 更新多个列：</span><br><span class="hljs-symbol">  - ![image-20230322200259426](image-20230322200259426.png)</span><br><span class="hljs-symbol"></span><br><span class="hljs-symbol"></span><br><span class="hljs-symbol"></span><br><span class="hljs-symbol">- 在`</span><span class="hljs-keyword">UPDATE</span><span class="hljs-symbol">`语句中可以使用子查询。能使用`</span><span class="hljs-keyword">SELECT</span><span class="hljs-symbol">`语句检索出的数据更新列数据。</span><br><span class="hljs-symbol"></span><br><span class="hljs-symbol"></span><br><span class="hljs-symbol"></span><br><span class="hljs-symbol">- 使用`</span><span class="hljs-keyword">IGNORE</span><span class="hljs-symbol">`关键字可以指定MySQL即使在更新这些行中的一行或是多行时出现一个错误，也继续更新。</span><br><span class="hljs-symbol"></span><br><span class="hljs-symbol">  - `</span><span class="hljs-symbol">``</span>sql<br>    <span class="hljs-keyword">UPDATE</span> <span class="hljs-keyword">IGNORE</span> table_name...<br></code></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<ul>
<li>删除某个列的值，可以设置它为<code>NULL</code> （假如表定义允许<code>NULL</code>值）。<ul>
<li><img src="image-20230322200658936.png" srcset="/img/loading.gif" lazyload alt="image-20230322200658936"></li>
</ul>
</li>
</ul>
<h2 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h2><ul>
<li>从表中删除（去掉）数据，使用<code>DELETE</code>语句。两种使用方式：<ul>
<li>从表中删除特定行。</li>
<li>从表中删除所有行。</li>
</ul>
</li>
</ul>
<ul>
<li>同样需要注意<code>WHERE</code>子句不要省略。</li>
</ul>
<ul>
<li><p>删除一行。</p>
<ul>
<li><p>```sql<br>DELETE FROM table_name<br>WHERE attribute = ‘target value’;</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><br><span class="hljs-bullet">  -</span> ![<span class="hljs-string">image-20230322200954075</span>](<span class="hljs-link">image-20230322200954075.png</span>)<br><br><br><br><span class="hljs-bullet">-</span> <span class="hljs-code">`DELETE`</span>不需要列名或通配符。<br><span class="hljs-bullet">-</span> <span class="hljs-code">`DELETE`</span>删除整行。<br><span class="hljs-bullet">-</span> 删除指定列使用<span class="hljs-code">`UPDATE`</span>语句。<br><br><br><br><span class="hljs-bullet">-</span> <span class="hljs-code">`DELETE`</span>删除表的内容，而没有删除表本身。<br><br><br><br><span class="hljs-bullet">-</span> 优先使用<span class="hljs-code">`TRUNCATE TABLE`</span>语句，来更快地删除表中地所有行。<br><span class="hljs-bullet">  -</span> <span class="hljs-code">`TRUNCATE`</span>实际是删除原来的表并重新创建一个表。不是逐行删除表中的数据。<br><br><br><br><br><br><span class="hljs-section">## 更新和删除的知道原则</span><br><br><span class="hljs-bullet">-</span> 除非确实打算更新和删除所有行。否则一定带<span class="hljs-code">`WHERE`</span>子句。<br><span class="hljs-bullet">-</span> 保证每个表都有主键。<br><span class="hljs-bullet">-</span> 使用<span class="hljs-code">`UPDATE`</span>或<span class="hljs-code">`DELETE`</span>语句使用子句<span class="hljs-code">`WHERE`</span>子句前，应该先使用<span class="hljs-code">`SELECT`</span>进行行测试。<br><span class="hljs-bullet">-</span> 使用强制实施引用完整性的数据库。<br><span class="hljs-bullet">  -</span> MySQL不允许删除具有与其他表相关联的数据的行。<br><br><br><br><span class="hljs-bullet">-</span> 需要非常小心使用<span class="hljs-code">`UPDATE`</span>和<span class="hljs-code">`DELETE`</span>，因为MySQL没有撤销。<br><br><br><br><br><br><br><br><span class="hljs-section"># 第21章 创建和操纵表</span><br><br><span class="hljs-section">## 创建表</span><br><br><span class="hljs-bullet">-</span> MySQL还可以来执行数据库和表的所有操作。包括表本身的创建和处理。<br><br><br><br><span class="hljs-bullet">-</span> 创建表的方法：<br><span class="hljs-bullet">  -</span> 使用交互式创建和管理表的工具。<br><span class="hljs-bullet">  -</span> 直接使用MySQL语句操纵。<br><br><br><br><span class="hljs-bullet">-</span> 使用MySQL的<span class="hljs-code">`CREATE TABLE`</span>语句创建表。<br><span class="hljs-bullet">  -</span> 使用交互式工具时，实际上使用的也是MySQL语句，只是不是用户编写二十界面工具自动生成并执行相应的MySQL语句。<br><br><br><br><span class="hljs-section">### 创建表的基础</span><br><br><span class="hljs-bullet">-</span> 使用<span class="hljs-code">`CREATE TABLE`</span>创建表，必须提供的信息<br><span class="hljs-bullet">  -</span> 新表的名字，<span class="hljs-code">`CREATE TABLE new_table_name`</span>。<br><span class="hljs-bullet">  -</span> 表列的名字和定义，逗号隔开。<br><br><br><br><span class="hljs-bullet">-</span> <span class="hljs-code">`CREATE TABLE`</span>语句可能包括其他关键字或选项，但至少包括表的名字和列的细节。<br><br><span class="hljs-bullet">-</span> <span class="hljs-code">```sql</span><br><span class="hljs-code">  CREATE TABLE new_table</span><br><span class="hljs-code">  (</span><br><span class="hljs-code">  	atrritbute data_type other_key_words, </span><br><span class="hljs-code">  	atrritbute data_type other_key_words, </span><br><span class="hljs-code">      atrritbute data_type other_key_words</span><br><span class="hljs-code">      PRIMARY KEY(atrribute(s))</span><br><span class="hljs-code">  ) ENGINE = InnoDB (or MYISAM);</span><br></code></pre></td></tr></table></figure></li>
<li><p><img src="image-20230323105716102.png" srcset="/img/loading.gif" lazyload alt="image-20230323105716102"></p>
</li>
</ul>
</li>
</ul>
<ul>
<li>语句格式化。<ul>
<li>MySQL语句中忽略空格。</li>
<li>尽量采用某种缩进格式。方便阅读。</li>
</ul>
</li>
</ul>
<ul>
<li>创建信新表的时候，指定的表明必须是不存在的，否则出错。</li>
<li>不能简单使用创建表语句覆盖已有表。<ul>
<li>应该手动删除该表。</li>
<li>然后再重建。</li>
</ul>
</li>
<li>如果仅想在一个表不存在时创建它，应该在表名之后给出<code>IF NOT EXIST</code>关键字。</li>
</ul>
<h3 id="使用NULL值"><a href="#使用NULL值" class="headerlink" title="使用NULL值"></a>使用<code>NULL</code>值</h3><ul>
<li><code>NULL</code>值就是没有值或缺值。<ul>
<li>允许<code>NULL</code>值的列允许在插入行时不给出该列的值。</li>
<li>不允许<code>NULL</code>值的列不接受该列没有值的行。在插入或更新的时候，该列必须有值。</li>
</ul>
</li>
</ul>
<ul>
<li><p>每个表列是<code>NULL</code>列或是<code>NOT NULL</code>列，是在创建时由表的定义规定的。</p>
<ul>
<li><img src="image-20230323110522113.png" srcset="/img/loading.gif" lazyload alt="image-20230323110522113"></li>
</ul>
</li>
<li><p><code>NULL</code>为默认设置，如果不指定<code>NOT NULL</code>，则认为指定的是<code>NULL</code>。</p>
</li>
</ul>
<ul>
<li><code>NULL</code>是没有值，不是空串。</li>
<li>空串<code>&#39;&#39;</code>在<code>NOT NULL</code>列中是允许的。空串是一个有效的值。</li>
</ul>
<h3 id="主键再介绍"><a href="#主键再介绍" class="headerlink" title="主键再介绍"></a>主键再介绍</h3><ul>
<li>主键值必须唯一。</li>
<li>如果使用多个列，则这些列的组合值必须唯一。</li>
</ul>
<ul>
<li><p>使用<code>CREATE TABLE</code>指定主键。</p>
<ul>
<li><p>```sql<br>PRIMARY KEY (attribute)</p>
<p>PRIMARY KEY (attribute1, attribute2,…)</p>
<figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs autohotkey"><br><br><br>- 主键可以在创建表时定义，或者创建表之后定义。<br><br><br><br>- 主键中只能使用不允许`NULL`值的列。允许`NULL`值的列不能作为唯一标识。<br><br><br><br>### 使用`AUTO_INCREMENT`<br><br>- `AUTO_INCREMENT`告诉MySQL，本列应当增加一行时自动增量。<br><br><br><br>- 每个表只允许一个`AUTO_INCREMENT`列，而且它必须被索引。<br><br><br><br>- 覆盖`AUTO_INCREMENT`。<br>  - 可以简单地在`INSERT`语句中指定一个值，只要它唯一即可，该值就可以被用来替代自动生成的值。<br>  - 后续增量将开始使用该手工插入的值。<br><br><br><br>- 确定`AUTO_INCREMENT`值。<br><br>  - 使用`last_insert_id()`函数获得这个值。<br><br>    - ```sql<br>      SELECT last_insert_id()<br></code></pre></td></tr></table></figure>

<ul>
<li>此语句返回最后一个<code>AUTO_INCREMENT</code>值，然后可以将它用于后续的MySQL语句。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="指定默认值"><a href="#指定默认值" class="headerlink" title="指定默认值"></a>指定默认值</h3><ul>
<li>如果在插入行的时候没有给出值，MySQL允许指定此时使用的默认值。</li>
</ul>
<ul>
<li><p>默认值使用<code>CREATE TABLE</code>语句的列定义中的<code>DEFAULT</code>关键字指定。</p>
<ul>
<li><p>```sql<br>CREATE TABLE new_table<br>(</p>
<pre><code class="hljs">attribute1 data_type [IS NULL | NOT NULL] DEFAULT default_value,
attribute2 data_type [IS NULL | NOT NULL] DEFAULT default_value,
...
attributex data_type [IS NULL | NOT NULL] DEFAULT default_value,
PRIMARY KEY (...)
</code></pre>
<p>) ENGINE = InnoDB;</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><br><span class="hljs-bullet">  -</span> ![<span class="hljs-string">image-20230324144256893</span>](<span class="hljs-link">image-20230324144256893.png</span>)<br><br><span class="hljs-bullet">    -</span> 在此例子中，给该列的描述添加文本<span class="hljs-code">`DEFAULT 1`</span>指示MySQL，在未给出数量的情况下使用数量<span class="hljs-code">`1`</span>。<br><br><br><br><span class="hljs-bullet">-</span> 与大多数DBMS不一样，MySQL不允许使用函数作为默认值，只支持常量。<br><br><br><br><span class="hljs-bullet">-</span> 使用默认值而不是<span class="hljs-code">`NULL`</span>值。<br><br><br><br><br><br><span class="hljs-section">### 引擎类型</span><br><br><span class="hljs-bullet">-</span> 与其他DBMS一样，MySQL有一个具体管理和处理数据的内部引擎。<br><span class="hljs-bullet">-</span> 多种引擎有各自不同的功能和特性，为不同的任务选择正确的引擎能获得良好的功能和灵活性。<br><br><br><br><span class="hljs-bullet">-</span> 可以忽略引擎，省略<span class="hljs-code">`ENGINE=语句`</span>，使用默认引擎。<br><span class="hljs-bullet">  -</span> 很可能是<span class="hljs-code">`MyISAM`</span>，多数SQL语句默认使用它。但不是所有语句都默认使用它。<br><br><br><br><span class="hljs-bullet">-</span> 需要知道的三个引擎：<br><span class="hljs-bullet">  -</span> <span class="hljs-code">`InnoDB`</span>：<br><span class="hljs-bullet">    -</span> 可靠的事务处理引擎。<br><span class="hljs-bullet">    -</span> 不支持全文本搜搜。<br><span class="hljs-bullet">  -</span> <span class="hljs-code">`MEMORY`</span>：<br><span class="hljs-bullet">    -</span> 功能等同于<span class="hljs-code">`MyISAM`</span>。<br><span class="hljs-bullet">    -</span> 但由于数据存储在内存而不是磁盘，速度很快。特别适合于临时表。<br><span class="hljs-bullet">  -</span> <span class="hljs-code">`MyISAM`</span>：<br><span class="hljs-bullet">    -</span> 性能极高的引擎。支持全文本搜索。<br><span class="hljs-bullet">    -</span> 不支持事务处理。<br><br><span class="hljs-bullet">-</span> 引擎可以混用。<br><span class="hljs-bullet">-</span> 外键不能跨引擎。<br><span class="hljs-bullet">  -</span> 外键（用于强制实施引用完整性）不能跨引擎，即使用一个引擎的表不能引用具有使用不同引擎的表的外键。<br><br><br><br><span class="hljs-section">## 更新表</span><br><br><span class="hljs-bullet">-</span> 为了更新表定义，使用<span class="hljs-code">`ALTER TABLE`</span>语句。<br><br><br><br><span class="hljs-bullet">-</span> 使用<span class="hljs-code">`ALTER TABLE`</span>更改表结构，必须给出下面的信息：<br><br><span class="hljs-bullet">  -</span> <span class="hljs-code">`ALTER TABLE`</span>之后必须要给出要更改的表名（该表必须存在，否则出错）。<br><span class="hljs-bullet">  -</span> 所做更改的列表。<br><span class="hljs-bullet">  -</span> ![<span class="hljs-string">image-20230324190847218</span>](<span class="hljs-link">image-20230324190847218.png</span>)<br><br><span class="hljs-bullet">  -</span> ![<span class="hljs-string">image-20230324190921371</span>](<span class="hljs-link">image-20230324190921371.png</span>)<br><br><br><br><span class="hljs-bullet">-</span> <span class="hljs-code">`ALTER TABLE`</span>的一种常见用途是定义外键。<br><span class="hljs-bullet">  -</span> ![<span class="hljs-string">image-20230324191047526</span>](<span class="hljs-link">image-20230324191047526.png</span>)<br><br><span class="hljs-bullet">-</span> 为了对单个表进行多个更改，可以使用单条<span class="hljs-code">`ALTER TABLE`</span>语句，每个更改用逗号分隔。<br><br><span class="hljs-bullet">-</span> 复杂的表结构更改一般需要手动删除过程。<br><br><br><br><span class="hljs-bullet">-</span> 小心使用<span class="hljs-code">`ALTER TABLE`</span>，应该在进行改动前做一个完整的备份（模式和数据的备份）。<br><span class="hljs-bullet">  -</span> 数据库表的更改不能撤销。<br><br><br><br><br><br><br><br><span class="hljs-section">## 删除表</span><br><br><span class="hljs-bullet">-</span> 删除整个表（不是其内容）使用<span class="hljs-code">`DROP TABLE`</span>语句。<br><br><span class="hljs-bullet">  -</span> <span class="hljs-code">```sql</span><br><span class="hljs-code">    DROP TABLE table_to_be_droped;</span><br></code></pre></td></tr></table></figure></li>
<li><p><img src="image-20230324191506415-1679656507093-1.png" srcset="/img/loading.gif" lazyload alt="image-20230324191506415"></p>
</li>
</ul>
</li>
</ul>
<h2 id="重命名表"><a href="#重命名表" class="headerlink" title="重命名表"></a>重命名表</h2><ul>
<li><p>使用<code>RENAME TABLE</code>语句可以重命名一个表。</p>
<ul>
<li><pre><code class="sql">RENAME TABLE old_table TO new_table;
</code></pre>
</li>
<li><p><img src="image-20230324191623867.png" srcset="/img/loading.gif" lazyload alt="image-20230324191623867"></p>
</li>
</ul>
</li>
</ul>
<h1 id="第22章-使用视图"><a href="#第22章-使用视图" class="headerlink" title="第22章 使用视图"></a>第22章 使用视图</h1><h2 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h2><ul>
<li>视图是虚拟的表。</li>
<li>视图只包含使用时动态检索数据的查询。</li>
</ul>
<h3 id="为什么使用视图"><a href="#为什么使用视图" class="headerlink" title="为什么使用视图"></a>为什么使用视图</h3><ul>
<li>视图仅仅是用来查看存储在别处的数据的一种设施。</li>
<li>视图本身不包含数据，因此它们返回的数据是从其他表中检索出来的。<ul>
<li>添加或更改这些表中的数据时，视图将返回改变过的数据。</li>
</ul>
</li>
</ul>
<ul>
<li>视图不包含数据，所以每次使用视图时都必须处理查询执行时所需的任一检索。</li>
</ul>
<h3 id="视图的规则和限制"><a href="#视图的规则和限制" class="headerlink" title="视图的规则和限制"></a>视图的规则和限制</h3><ul>
<li>视图命名必须唯一。</li>
<li>可创建的视图数目没有限制。</li>
<li>必须有足够的访问权限才能创建视图。</li>
<li>视图可以嵌套。</li>
<li><code>ORDER BY</code>1可以用在视图中。<ul>
<li>视图检索数据<code>SELECT</code>中也含有的<code>ORDER BY</code>将被覆盖。</li>
</ul>
</li>
<li>视图不能索引，也不能有关联的触发器和默认值。</li>
<li>视图可以和表一起使用。</li>
</ul>
<h2 id="使用视图"><a href="#使用视图" class="headerlink" title="使用视图"></a>使用视图</h2><ul>
<li>使用<code>CREATE VIEW</code>语句创建视图。</li>
<li>使用<code>SHOW CREATE VIEW viewname</code>来查看创建视图的语句。</li>
<li>使用<code>DROP VIEW viewname</code>删除视图。</li>
<li>更新视图。<ul>
<li>可以先<code>DROP</code>再用<code>CREATE</code>。</li>
<li>也可以直接用<code>CREATE OR REPLACE VIEW</code>。<ul>
<li>如果更新的视图不存在，则创建一个视图。</li>
<li>如果更新的视图存在则替换原有视图。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="利用视图简化复杂的联结"><a href="#利用视图简化复杂的联结" class="headerlink" title="利用视图简化复杂的联结"></a>利用视图简化复杂的联结</h3><ul>
<li>视图最常见的应用之一就是隐藏复杂的SQL，通常涉及联结。<ul>
<li><img src="image-20230330200129898.png" srcset="/img/loading.gif" lazyload alt="image-20230330200129898"></li>
<li><img src="image-20230330200142250-1680177703142-1.png" srcset="/img/loading.gif" lazyload alt="image-20230330200142250"></li>
</ul>
</li>
</ul>
<ul>
<li>视图极大地简化了复杂SQL语句的使用。</li>
<li>利用视图，可以一次性编写基础的SQL，然后根据需要多次使用。</li>
</ul>
<ul>
<li>创建可重用的视图。<ul>
<li>扩展视图的范围可以不仅使得它能被重用，而且甚至更有用。</li>
</ul>
</li>
</ul>
<h3 id="用视图重新格式化检索出的数据"><a href="#用视图重新格式化检索出的数据" class="headerlink" title="用视图重新格式化检索出的数据"></a>用视图重新格式化检索出的数据</h3><ul>
<li>视图的另一个常见用途：重新格式化检索出的数据。<ul>
<li><img src="image-20230330200719343.png" srcset="/img/loading.gif" lazyload alt="image-20230330200719343"></li>
<li><img src="image-20230330200749551.png" srcset="/img/loading.gif" lazyload alt="image-20230330200749551"></li>
</ul>
</li>
</ul>
<h3 id="使用视图过滤不想要的数据"><a href="#使用视图过滤不想要的数据" class="headerlink" title="使用视图过滤不想要的数据"></a>使用视图过滤不想要的数据</h3><ul>
<li>视图对于应用普通的<code>WHERE</code>子句也很有用。<ul>
<li><img src="image-20230330200957571.png" srcset="/img/loading.gif" lazyload alt="image-20230330200957571"></li>
<li><img src="image-20230330201021643.png" srcset="/img/loading.gif" lazyload alt="image-20230330201021643"></li>
</ul>
</li>
</ul>
<ul>
<li>视图中的<code>WHERE</code>子句和传递给视图的<code>WHERE</code>子句将自动组合。</li>
</ul>
<h3 id="使用视图与计算字段"><a href="#使用视图与计算字段" class="headerlink" title="使用视图与计算字段"></a>使用视图与计算字段</h3><ul>
<li>视图对于简化计算字段的使用特别有用。<ul>
<li><img src="image-20230330201401135.png" srcset="/img/loading.gif" lazyload alt="image-20230330201401135"></li>
<li><img src="image-20230330201409427.png" srcset="/img/loading.gif" lazyload alt="image-20230330201409427"></li>
</ul>
</li>
</ul>
<h3 id="更新视图"><a href="#更新视图" class="headerlink" title="更新视图"></a>更新视图</h3><ul>
<li>通常视图是可更新的（对其可以使用<code>INSERT</code>、<code>UPDATE</code>、<code>DELETE</code>）。</li>
<li>更新一个视图将更新其基表。<ul>
<li>如果对视图增加或是删除行，实际上实对其基表增加或删除行。</li>
</ul>
</li>
</ul>
<ul>
<li>如果MySQL不能正确地确定被更新的基数据，则不允许更新（包括插入和删除）。</li>
<li>即有以下操作地，不能进行视图的更新：<ul>
<li>分组（使用<code>GROUP BY</code>和<code>HAVING</code>）</li>
<li>联结</li>
<li>子查询</li>
<li>并</li>
<li>聚集函数（<code>Min()</code>、<code>Count()</code>、<code>Sum()</code>等）；</li>
<li><code>DISTINCT</code></li>
<li>导出（计算）列</li>
</ul>
</li>
</ul>
<ul>
<li>视图主要用于数据检索。</li>
</ul>
<h1 id="第23章-使用存储过程"><a href="#第23章-使用存储过程" class="headerlink" title="第23章 使用存储过程"></a>第23章 使用存储过程</h1><h2 id="存储过程"><a href="#存储过程" class="headerlink" title="存储过程"></a>存储过程</h2><ul>
<li>一个完整的操作需要多条语句才能完成。</li>
<li>需要执行的具体语句及其次序也不是固定的。</li>
<li>创建存储过程。<ul>
<li>简单来说，存储过程就是为以后使用而保存的一条或多条MySQL语句的集合。</li>
<li>可以单独编写每条语句，并根据结果有条件地执行另外的语句。</li>
</ul>
</li>
</ul>
<h2 id="为什么要使用存储过程"><a href="#为什么要使用存储过程" class="headerlink" title="为什么要使用存储过程"></a>为什么要使用存储过程</h2><ul>
<li>通过封装，简化复杂操作。</li>
<li>不要求反复简历一系列处理步骤，保证了数据完整性。</li>
<li>简化变动的管理。<ul>
<li>安全性。</li>
</ul>
</li>
<li>提高性能，使用存储过程比使用单独的SQL语句快。</li>
<li>存在只能在单个请求中的MySQL和特性，存储过程可以编写更强更灵活的代码。</li>
</ul>
<ul>
<li><p>缺点。</p>
<ul>
<li>编写存储过程更复杂。</li>
<li>可能没有创建存储过程的安全访问权限。</li>
</ul>
</li>
<li><p>MySQL将编写存储过程的安全和访问，与执行存储过程的安全与访问区分开来。</p>
<ul>
<li>不能编写存储过程，但依然可以使用存储过程。</li>
</ul>
</li>
</ul>
<h2 id="使用存储过程"><a href="#使用存储过程" class="headerlink" title="使用存储过程"></a>使用存储过程</h2><h3 id="执行存储过程"><a href="#执行存储过程" class="headerlink" title="执行存储过程"></a>执行存储过程</h3><ul>
<li>MySQL称存储过程的执行为<strong>调用</strong>。<ul>
<li>MySQL执行存储过程的语句为 <code>CALL</code>。</li>
<li><code>CALL</code>接受存储过程的名字以及需要传递给它的任意参数。</li>
<li><img src="image-20230405172154398.png" srcset="/img/loading.gif" lazyload alt="image-20230405172154398"></li>
</ul>
</li>
</ul>
<h3 id="创建存储过程"><a href="#创建存储过程" class="headerlink" title="创建存储过程"></a>创建存储过程</h3><ul>
<li>一个返回产品平均价格的存储过程的例子。<ul>
<li><img src="image-20230405190411517.png" srcset="/img/loading.gif" lazyload alt="image-20230405190411517"></li>
<li>在MySQL处理这段代码时，它创建一个新的存储过程productpricing。</li>
<li>没有返回数据，因为这段代码并未调用存储过程，这里只是为以后使用而创建它。</li>
</ul>
</li>
</ul>
<ul>
<li>默认的MySQL语句分隔符为<code>;</code>。</li>
<li>使用<code>DELIMITER</code>更改命令行实用程序的语句分隔符。<ul>
<li><img src="image-20230405190758646.png" srcset="/img/loading.gif" lazyload alt="image-20230405190758646"></li>
<li>其中，<code>DELIMITER //</code>告诉命令行实用程序使用<code>//</code>作为新的语句结束分隔符，可以看到标志存储过程结束的<code>END</code>定义为<code>END //</code>而不是<code>END</code>;</li>
<li>这样，存储过程体内的<code>;</code>仍然保持不动，并且正确地传递给数据库引擎。</li>
<li>除<code>\</code>符号外，任何字符都可以用作语句分隔符。</li>
<li>使用存储过程。<ul>
<li><img src="image-20230405191115569.png" srcset="/img/loading.gif" lazyload alt="image-20230405191115569"></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="删除存储过程"><a href="#删除存储过程" class="headerlink" title="删除存储过程"></a>删除存储过程</h3><ul>
<li>使用<code>DROP PROCEDURE name_to_be_removed</code>。<ul>
<li><img src="image-20230405191226848.png" srcset="/img/loading.gif" lazyload alt="image-20230405191226848"></li>
<li>仅当存在时删除，如果指定的过程不存在，将会产生一个错误。</li>
<li>使用<code>DROP PROCEDURE IF EXISTS</code>，仅当存在时删除。</li>
</ul>
</li>
</ul>
<h3 id="使用参数"><a href="#使用参数" class="headerlink" title="使用参数"></a>使用参数</h3><ul>
<li>一般存储过程并不显示结果，而是把结果返回给你指定的变量。<ul>
<li>变量是内存中一个特定的位置，用来临时存储数据。</li>
<li><img src="image-20230405191655762.png" srcset="/img/loading.gif" lazyload alt="image-20230405191655762"></li>
<li><img src="image-20230405191708370.png" srcset="/img/loading.gif" lazyload alt="image-20230405191708370"></li>
<li>存储过程的参数允许的数据类型与表中使用的数据类型相同。</li>
<li>记录集不是允许的类型，不能通过一个参数返回多个行和列。</li>
</ul>
</li>
</ul>
<ul>
<li>为了调用包含参数的存储过程，需要指定对应的变量名。<ul>
<li><img src="image-20230405192540066.png" srcset="/img/loading.gif" lazyload alt="image-20230405192540066"></li>
</ul>
</li>
</ul>
<ul>
<li>MySQL所有的变量名都必须以<code>@</code>开始。</li>
</ul>
<ul>
<li>调用的时候不显示任何数据，存储过程返回后可以显示变量。<ul>
<li><img src="image-20230405192701899.png" srcset="/img/loading.gif" lazyload alt="image-20230405192701899"></li>
<li><img src="image-20230405192711053.png" srcset="/img/loading.gif" lazyload alt="image-20230405192711053"></li>
</ul>
</li>
</ul>
<ul>
<li><p>使用<code>IN</code>和<code>OUT</code>参数的例子。</p>
<ul>
<li><p><img src="image-20230405192740380.png" srcset="/img/loading.gif" lazyload alt="image-20230405192740380"></p>
<p><img src="image-20230405192801219.png" srcset="/img/loading.gif" lazyload alt="image-20230405192801219"></p>
</li>
<li><p><img src="image-20230405192840514.png" srcset="/img/loading.gif" lazyload alt="image-20230405192840514"></p>
</li>
</ul>
</li>
</ul>
<h3 id="建立智能存储过程"><a href="#建立智能存储过程" class="headerlink" title="建立智能存储过程"></a>建立智能存储过程</h3><ul>
<li><p>只有存储过程内包含业务规则和智能处理时，存储过程的威力才真正显现出来。</p>
<ul>
<li><img src="image-20230405193346796.png" srcset="/img/loading.gif" lazyload alt="image-20230405193346796"><img src="image-20230405193401346.png" srcset="/img/loading.gif" lazyload alt="image-20230405193401346"><img src="image-20230405193421582.png" srcset="/img/loading.gif" lazyload alt="image-20230405193421582"></li>
<li><img src="image-20230405193539887.png" srcset="/img/loading.gif" lazyload alt="image-20230405193539887"></li>
<li><code>COMMENT</code>关键字。<ul>
<li>不是必需的，如果给出，将在<code>SHOW PROCEDURE STATUS</code>的结果中显示。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="检查存储过程"><a href="#检查存储过程" class="headerlink" title="检查存储过程"></a>检查存储过程</h3><ul>
<li>显示创建一个存储过程的<code>CREATE</code>语句，使用<code>SHOW CREATE PROCEDURE</code>语句。</li>
</ul>
<ul>
<li>为了获得包括何时、由谁船舰等详细信息的存储过程列表，使用<code>SHOW PROCEDURE STATUS</code>语句。</li>
</ul>
<h1 id="第24章-使用游标"><a href="#第24章-使用游标" class="headerlink" title="第24章 使用游标"></a>第24章 使用游标</h1><h2 id="游标"><a href="#游标" class="headerlink" title="游标"></a>游标</h2><ul>
<li>MySQL检索操作返回一组称为结果集的行。</li>
<li>使用简单的<code>SELECT</code>语句没有办法得到指定行。有时候需要在检索出来的行中前进或后退一行或多行。</li>
</ul>
<ul>
<li>使用游标。<ul>
<li>游标是一个存储在MySQL服务器上的数据库查询，不是一条<code>SELECT</code>语句，而是被该语句检索出来的结果集。</li>
<li>在存储了游标之后，应用程序可以根据需要滚动或浏览其中的数据。</li>
<li>游标主要用于交互式应用。<ul>
<li>其中用户需要滚动屏幕上的数据，并对数据进行浏览或做出更改。</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li>MySQL游标只能用于存储过程。</li>
</ul>
<h2 id="使用游标"><a href="#使用游标" class="headerlink" title="使用游标"></a>使用游标</h2><ul>
<li>使用游标涉及几个明确的步骤。<ul>
<li>使用游标前必须声明（定义）它。<ul>
<li>这个过程没有检索数据，只是定义要使用的<code>SELECT</code>语句。</li>
</ul>
</li>
<li>一旦声明后，必须打开游标以供使用。<ul>
<li>用前面定义的<code>SELECT</code>语句把数据实际检索出来。</li>
</ul>
</li>
<li>对于填有数据的游标，根据需要取出（检索）各行。</li>
<li>在结束游标使用时，必须关闭游标。</li>
</ul>
</li>
</ul>
<ul>
<li>声明游标后，可以根据需要频繁打开和关闭游标。</li>
<li>打开游标后，可根据需求频繁执行取操作。</li>
</ul>
<h3 id="创建游标"><a href="#创建游标" class="headerlink" title="创建游标"></a>创建游标</h3><ul>
<li>游标使用<code>DECLARE</code>语句创建。<ul>
<li><code>DECLARE</code>命名游标，并定义相应的<code>SELECT</code>语句，根据需要带<code>WHERE</code>和其他子句。</li>
<li><img src="image-20230405200342525.png" srcset="/img/loading.gif" lazyload alt="image-20230405200342525"></li>
</ul>
</li>
</ul>
<ul>
<li>定义游标之后，可以打开它。</li>
</ul>
<h3 id="打开和关闭游标"><a href="#打开和关闭游标" class="headerlink" title="打开和关闭游标"></a>打开和关闭游标</h3><ul>
<li>使用<code>OPEN cursor</code>打开游标。<ul>
<li><img src="image-20230405200451196.png" srcset="/img/loading.gif" lazyload alt="image-20230405200451196"></li>
</ul>
</li>
</ul>
<ul>
<li><p>使用完成后使用<code>CLOSE cursor</code>语句来关闭游标。</p>
<ul>
<li><img src="image-20230405200553337.png" srcset="/img/loading.gif" lazyload alt="image-20230405200553337"></li>
</ul>
</li>
</ul>
<ul>
<li>游标关闭之后，如果没有重新打开则不能使用。</li>
<li>声明过的游标不需要再次声明，用<code>OPEN</code>语句打开就可以了。</li>
</ul>
<ul>
<li>隐含关闭。<ul>
<li>如果不明确关闭游标，MySQL将会在到达<code>END</code>语句时自动关闭它。</li>
</ul>
</li>
</ul>
<ul>
<li>前面的例子。<ul>
<li><img src="image-20230405200822936.png" srcset="/img/loading.gif" lazyload alt="image-20230405200822936"></li>
</ul>
</li>
</ul>
<h3 id="使用游标数据"><a href="#使用游标数据" class="headerlink" title="使用游标数据"></a>使用游标数据</h3><ul>
<li>一个游标被打开后，可以使用<code>FETCH</code>语句分别访问其每一行。</li>
<li><code>FETCH</code>指定检索什么数据（所需的列），检索出来的数据存储在什么地方。<ul>
<li>它还向前移动游标中的内部行指针，使下一条<code>FETCH</code>语句检索下一行（不重复读取同一行）。</li>
<li><img src="image-20230405201458333.png" srcset="/img/loading.gif" lazyload alt="image-20230405201458333"></li>
<li><img src="image-20230405201507829.png" srcset="/img/loading.gif" lazyload alt="image-20230405201507829"></li>
<li><img src="image-20230405201804353.png" srcset="/img/loading.gif" lazyload alt="image-20230405201804353"><img src="image-20230405201822388.png" srcset="/img/loading.gif" lazyload alt="image-20230405201822388"></li>
<li><img src="image-20230405201837790.png" srcset="/img/loading.gif" lazyload alt="image-20230405201837790"></li>
</ul>
</li>
</ul>
<h1 id="第25章-使用触发器"><a href="#第25章-使用触发器" class="headerlink" title="第25章 使用触发器"></a>第25章 使用触发器</h1><h2 id="触发器"><a href="#触发器" class="headerlink" title="触发器"></a>触发器</h2><ul>
<li>需要某条语句（或某些语句）在事件发生时自动执行。</li>
</ul>
<ul>
<li>触发器是MySQL响应以下任意语句而自动执行的一条MySQL语句（或位于<code>BEGIN</code>和<code>END</code>之间的一组语句）：<ul>
<li><code>DELETE</code></li>
<li><code>INSERT</code></li>
<li><code>UPDATE</code></li>
</ul>
</li>
<li>其他MySQL语句不支持触发器。</li>
</ul>
<h2 id="创建触发器"><a href="#创建触发器" class="headerlink" title="创建触发器"></a>创建触发器</h2><ul>
<li>创建触发器时，需要给出4条信息：<ul>
<li>触发名。唯一。</li>
<li>关联的表</li>
<li>响应的活动（<code>DELETE</code>，<code>INSERT</code>或<code>UPDATE</code>）</li>
<li>何时执行（处理前或处理后）。</li>
</ul>
</li>
</ul>
<ul>
<li>使用<code>CREATE TRIGGER</code>语句创建触发器。<ul>
<li><img src="image-20230408154412637.png" srcset="/img/loading.gif" lazyload alt="image-20230408154412637" style="zoom:67%;" /></li>
</ul>
</li>
</ul>
<ul>
<li><p>只有表才支持触发器，视图不支持。</p>
</li>
<li><p>触发器按每个表每个事件每次地定义，每个表每个事件每次只允许一个触发器。</p>
<ul>
<li>每个表最多支持6个触发器（每条<code>INSERT</code>、<code>UPDATE</code>和<code>DELETE</code>的之前和之后）。</li>
<li>单一触发器不能与多个事件或多个表关联。<ul>
<li>如果需要则需要定义多个触发器。</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li>如果<code>BEFORE</code>触发器失败，则不执行请求的操作。</li>
<li>如果<code>BEFORE</code>触发器或语句本身失败，则不执行<code>AFTER</code>触发器。</li>
</ul>
<h2 id="删除触发器"><a href="#删除触发器" class="headerlink" title="删除触发器"></a>删除触发器</h2><ul>
<li>使用<code>DROP TRIGGER</code>语句删除触发器。<ul>
<li><img src="image-20230408154923215.png" srcset="/img/loading.gif" lazyload alt="image-20230408154923215"></li>
</ul>
</li>
</ul>
<h2 id="使用触发器"><a href="#使用触发器" class="headerlink" title="使用触发器"></a>使用触发器</h2><h3 id="INSERT触发器"><a href="#INSERT触发器" class="headerlink" title="INSERT触发器"></a><code>INSERT</code>触发器</h3><ul>
<li><code>INSERT</code>触发器在<code>INSERT</code>语句执行之前或之后进行。</li>
<li>需要知道的几点。<ul>
<li><code>INSERT</code>触发器代码内，可引用一个名为<code>NEW</code>的虚拟表，访问被插入的行；</li>
<li>在<code>BEFORE INSERT</code>触发器中，<code>NEW</code>中的值也可以被更新（允许更改被插入的值）；</li>
<li>对于<code>AUTO_INCREMENT</code>列，<code>NEW</code>在<code>INSERT</code>执行之前包含0，在<code>INSERT</code>执行之后包含新的自动生成值。</li>
<li><img src="image-20230408155243886.png" srcset="/img/loading.gif" lazyload alt="image-20230408155243886"></li>
</ul>
</li>
</ul>
<h3 id="DELETE触发器"><a href="#DELETE触发器" class="headerlink" title="DELETE触发器"></a><code>DELETE</code>触发器</h3><ul>
<li><p><code>DELETE</code>触发器在<code>DELETE</code>语句执行之前或之后执行。</p>
</li>
<li><p>需要知道的两点。</p>
<ul>
<li>在<code>DELETE</code>触发器代码内，你可以引用一个名为<code>OLD</code>的虚拟表，访问被删除的行；</li>
<li><code>OLD</code>中的值全都是只读的，不能更新。</li>
<li><img src="image-20230408155526318.png" srcset="/img/loading.gif" lazyload alt="image-20230408155526318"></li>
</ul>
</li>
</ul>
<h3 id="UPDATE触发器"><a href="#UPDATE触发器" class="headerlink" title="UPDATE触发器"></a><code>UPDATE</code>触发器</h3><ul>
<li><p><code>UPDATE</code>触发器在<code>UPDATE</code>语句执行之前或之后执行。</p>
</li>
<li><p>需要知道的几点。</p>
<ul>
<li>在<code>UPDATE</code>触发器代码中，你可以引用一个名为<code>OLD</code>的虚拟表访问以前（<code>UPDATE</code>语句前）的值，引用一个名为<code>NEW</code>的虚拟表访问新更新的值；</li>
<li>在<code>BEFORE UPDATE</code>触发器中，<code>NEW</code>中的值可能也被更新（允许更改将要用于<code>UPDATE</code>语句中的值）；</li>
<li><code>OLD</code>中的值全都是只读的，不能更新。</li>
<li><img src="image-20230408155811146.png" srcset="/img/loading.gif" lazyload alt="image-20230408155811146"></li>
</ul>
</li>
</ul>
<h1 id="第26章-管理事务处理"><a href="#第26章-管理事务处理" class="headerlink" title="第26章 管理事务处理"></a>第26章 管理事务处理</h1><h2 id="事务处理"><a href="#事务处理" class="headerlink" title="事务处理"></a>事务处理</h2><ul>
<li>并非所用引擎都支持事务处理。<ul>
<li>MyISAM和InnoDB是两种最常使用的引擎。前者不支持明确的事务处理管理，而后者支持。</li>
<li>如果你的应用中需要事务处理功能，则一定要使用正确的引擎类型。</li>
</ul>
</li>
</ul>
<ul>
<li>事务处理（Transaction Processing）可以用来维护数据库的完整性，它保证成批的MySQL操作用么完全执行，要么完全不执行。<ul>
<li>事务处理是一种机制，用来管理必须成批执行的MySQL操作，以保证数据库不包含不完整的操作结果。</li>
<li>如果发生错误，则进行回退（撤销）以恢复数据库到某个已知且安全的状态。</li>
</ul>
</li>
</ul>
<ul>
<li>关于事务处理需要知道的术语。<ul>
<li>事务（transaction）指一组SQL语句； </li>
<li>回退（rollback）指撤销指定SQL语句的过程；</li>
<li>提交（commit）指将未存储的SQL语句结果写入数据库表；</li>
<li>保留点（savepoint）指事务处理中设置的临时占位符（placeholder），你可以对它发布回退（与回退整个事务处理不同）。</li>
</ul>
</li>
</ul>
<h2 id="控制事务处理"><a href="#控制事务处理" class="headerlink" title="控制事务处理"></a>控制事务处理</h2><ul>
<li><p>管理事务处理的关键在于将SQL语句组分解为逻辑块，并明确规定数据何时应该回退，何时不应该回退。</p>
</li>
<li><p>使用<code>START TRANSACTION</code>标识事务的开始。</p>
</li>
</ul>
<h3 id="使用ROLLBACK"><a href="#使用ROLLBACK" class="headerlink" title="使用ROLLBACK"></a>使用<code>ROLLBACK</code></h3><ul>
<li>MySQL的<code>ROLLBACK</code>命令用来回退（撤销）MySQL语句。<ul>
<li><img src="image-20230408161827596.png" srcset="/img/loading.gif" lazyload alt="image-20230408161827596"><img src="image-20230408161842863.png" srcset="/img/loading.gif" lazyload alt="image-20230408161842863"></li>
</ul>
</li>
</ul>
<ul>
<li><code>ROLLBACK</code>只能在一个事务处理内使用（在执行一条<code>START TRANSACTION</code>命令之后）。</li>
</ul>
<ul>
<li>事务处理用来管理<code>INSERT</code>、<code>UPDATE</code>和<code>DELETE</code>语句。</li>
<li>你不能回退<code>SELECT</code>语句。（这样做也没有什么意义）</li>
<li>你不能回退<code>CREATE</code>或<code>DROP</code>操作。事务处理块中可以使用这两条语句，但如果你执行回退，它们不会被撤销。</li>
</ul>
<h3 id="使用COMMIT"><a href="#使用COMMIT" class="headerlink" title="使用COMMIT"></a>使用<code>COMMIT</code></h3><ul>
<li><p>一般的MySQL语句都是直接针对数据库表执行和编写的。这就是所谓的<strong>隐含提交</strong>（implicit commit），即提交（写或保存）操作是自动进行的。</p>
</li>
<li><p>在事务处理块中，提交不会隐含地进行。为进行明确的提交，使用<code>COMMIT</code>语句。</p>
<ul>
<li><img src="image-20230408162303814.png" srcset="/img/loading.gif" lazyload alt="image-20230408162303814"></li>
</ul>
</li>
<li><p>当<code>COMMIT</code>或<code>ROLLBACK</code>语句执行后，事务会自动关闭（将来的更改会隐含提交）。</p>
</li>
</ul>
<h3 id="使用保留点"><a href="#使用保留点" class="headerlink" title="使用保留点"></a>使用保留点</h3><ul>
<li>简单的<code>ROLLBACK</code>和<code>COMMIT</code>语句就可以写入或撤销整个事务处理。</li>
<li>更复杂的事务处理可能需要部分提交或回退。<ul>
<li>为了支持回退部分事务处理，必须能在事务处理块中合适的位置放置占位符。</li>
</ul>
</li>
</ul>
<ul>
<li>为了创建占位符，可如下使用<code>SAVEPOINT</code>语句。<ul>
<li><img src="image-20230408162555344.png" srcset="/img/loading.gif" lazyload alt="image-20230408162555344"></li>
</ul>
</li>
<li>保留点越多越好。</li>
<li>保留点在事务处理完成后自动释放，也可以使用<code>RELEASE SAVEPOINT</code>明确地释放保留点。</li>
</ul>
<h3 id="更改默认的提交行为"><a href="#更改默认的提交行为" class="headerlink" title="更改默认的提交行为"></a>更改默认的提交行为</h3><ul>
<li>默认的MySQL行为是自动提交所有更改。<ul>
<li>任何时候你执行一条MySQL语句，该语句实际上都是针对表执行的，而且所做的更改立即生效。</li>
</ul>
</li>
</ul>
<ul>
<li>为指示MySQL不自动提交更改，需要使用以下语句：<ul>
<li><img src="image-20230408162824680.png" srcset="/img/loading.gif" lazyload alt="image-20230408162824680"></li>
</ul>
</li>
</ul>
<ul>
<li><code>autocommit</code>标志是针对每个连接而不是服务器的。</li>
</ul>
<h1 id="第27章-全球化和本地化"><a href="#第27章-全球化和本地化" class="headerlink" title="第27章 全球化和本地化"></a>第27章 全球化和本地化</h1><h2 id="字符集和校对顺序"><a href="#字符集和校对顺序" class="headerlink" title="字符集和校对顺序"></a>字符集和校对顺序</h2><ul>
<li>不同的语言和字符集需要以不同的方式存储和检索。</li>
</ul>
<ul>
<li>讨论多种语言和字符集涉及到的术语。<ul>
<li><strong>字符集</strong>为字母和符号的集合；</li>
<li><strong>编码</strong>为某个字符集成员的内部表示；</li>
<li><strong>校对</strong>为规定字符如何比较的指令。</li>
</ul>
</li>
</ul>
<h2 id="使用字符集和校对顺序"><a href="#使用字符集和校对顺序" class="headerlink" title="使用字符集和校对顺序"></a>使用字符集和校对顺序</h2><ul>
<li>MySQL支持众多的字符集。为查看所支持的字符集完整列表，使用以下语句：<ul>
<li><img src="image-20230408163641211.png" srcset="/img/loading.gif" lazyload alt="image-20230408163641211"></li>
</ul>
</li>
<li>为了查看所支持校对的完整列表，使用以下语句。<ul>
<li><img src="image-20230408163719535.png" srcset="/img/loading.gif" lazyload alt="image-20230408163719535"></li>
</ul>
</li>
</ul>
<ul>
<li>通常系统管理在安装时定义一个默认的字符集和校对。</li>
<li>也可以在创建数据库时，指定默认的字符集和校对。</li>
</ul>
<ul>
<li>为了确定所用的字符集和校对，可以使用以下语句：<ul>
<li><img src="image-20230408164240080.png" srcset="/img/loading.gif" lazyload alt="image-20230408164240080"></li>
</ul>
</li>
</ul>
<ul>
<li>为了给表指定字符集和校对，可使用带子句的<code>CREATE TABLE</code>：<ul>
<li><img src="image-20230408164333909.png" srcset="/img/loading.gif" lazyload alt="image-20230408164333909"></li>
</ul>
</li>
</ul>
<ul>
<li>一般，MySQL如下确定使用什么样的字符集和校对。<ul>
<li>如果指定<code>CHARACTER SET</code>和<code>COLLATE</code>两者，则使用这些值。</li>
<li>如果只指定<code>CHARACTER SET</code>，则使用此字符集及其默认的校对（如<code>SHOW CHARACTER SET</code>的结果中所示）。</li>
<li>如果既不指定<code>CHARACTER SET</code>，也不指定<code>COLLATE</code>，则使用数据库默认。</li>
</ul>
</li>
</ul>
<ul>
<li>除了能指定字符集和校对的表范围外，MySQL还允许对每个列设置它们，如下所示：<ul>
<li><img src="image-20230408164535997.png" srcset="/img/loading.gif" lazyload alt="image-20230408164535997"></li>
<li><img src="image-20230408164622281.png" srcset="/img/loading.gif" lazyload alt="image-20230408164622281"></li>
</ul>
</li>
</ul>
<ul>
<li><code>COLLATE</code>还可以用于<code>GROUP BY</code>、<code>HAVING</code>、聚集函数、别名等。</li>
</ul>
<h1 id="第28章-安全管理"><a href="#第28章-安全管理" class="headerlink" title="第28章 安全管理"></a>第28章 安全管理</h1><h2 id="访问控制"><a href="#访问控制" class="headerlink" title="访问控制"></a>访问控制</h2><ul>
<li>用户应该对他们需要的数据具有适当的访问权，既不能多也不能少。</li>
<li>即你需要给用户提供他们所需的访问权，且仅提供他们所需的访问权。<ul>
<li>这就是所谓的访问控制，管理访问控制需要创建和管理用户账号</li>
</ul>
</li>
</ul>
<ul>
<li>MySQL Administrator（在第2章中描述）提供了一个图形用户界面，可用来管理用户及账号权限。</li>
</ul>
<ul>
<li>访问控制的目的不仅仅是防止用户的恶意企图。</li>
<li>数据梦魇更为常见的是无意识错误的结果，如错打MySQL语句，在不合适的数据库中操作或其他一些用户错误。</li>
<li>应该严肃对待root登录的使用。</li>
</ul>
<h2 id="管理用户"><a href="#管理用户" class="headerlink" title="管理用户"></a>管理用户</h2><ul>
<li>MySQL用户账号和信息存储在名为mysql的MySQL数据库中。<ul>
<li><img src="image-20230408165225660.png" srcset="/img/loading.gif" lazyload alt="image-20230408165225660"><img src="image-20230408165236042.png" srcset="/img/loading.gif" lazyload alt="image-20230408165236042"></li>
</ul>
</li>
</ul>
<h3 id="创建用户账户"><a href="#创建用户账户" class="headerlink" title="创建用户账户"></a>创建用户账户</h3><ul>
<li>为了创建一个新用户账号，使用<code>CREATE USER</code>语句。<ul>
<li><img src="image-20230408165342150.png" srcset="/img/loading.gif" lazyload alt="image-20230408165342150"></li>
<li><code>IDENTIFIED BY</code>指定的口令为纯文本，MySQL将在保存到user表之前对其进行加密。</li>
<li>为了作为散列值指定口令，使用<code>IDENTIFIED BY PASSWORD</code>。</li>
</ul>
</li>
</ul>
<ul>
<li>使用<code>GRANT</code>或<code>INSERT</code>也可以创建用户。<ul>
<li> <code>GRANT</code>语句（稍后介绍）也可以创建用户账号，但一般来说CREATE USER是最清楚和最简单的句子。</li>
<li>此外，也可以通过直接插入行到<code>user</code>表来增加用户。不建议。</li>
</ul>
</li>
</ul>
<ul>
<li>为重新命名一个用户账号，使用<code>RENAME USER</code>语句:<ul>
<li><img src="image-20230408165826008.png" srcset="/img/loading.gif" lazyload alt="image-20230408165826008"></li>
</ul>
</li>
</ul>
<h3 id="删除用户账户"><a href="#删除用户账户" class="headerlink" title="删除用户账户"></a>删除用户账户</h3><ul>
<li>为了删除一个用户账号（以及相关的权限），使用<code>DROP USER</code>语句：<ul>
<li><img src="image-20230408165923585.png" srcset="/img/loading.gif" lazyload alt="image-20230408165923585"></li>
</ul>
</li>
</ul>
<h3 id="设置访问权限"><a href="#设置访问权限" class="headerlink" title="设置访问权限"></a>设置访问权限</h3><ul>
<li>在创建用户账号后，必须接着分配访问权限。</li>
<li>新创建的用户账号没有访问权限。<ul>
<li>它们能登录MySQL，但不能看到数据，不能执行任何数据库操作。</li>
</ul>
</li>
</ul>
<ul>
<li>为看到赋予用户账号的权限，使用<code>SHOW GRANTS FOR</code>：<ul>
<li><img src="image-20230408170118878.png" srcset="/img/loading.gif" lazyload alt="image-20230408170118878"><img src="image-20230408170128329.png" srcset="/img/loading.gif" lazyload alt="image-20230408170128329"></li>
</ul>
</li>
</ul>
<ul>
<li>MySQL的权限用用户名和主机名结合定义。<ul>
<li>如果不指定主机名，则使用默认的主机名%（授予用户访问权限而不管主机名）。</li>
</ul>
</li>
</ul>
<ul>
<li>为设置权限，使用<code>GRANT</code>语句。<code>GRANT</code>要求你至少给出以下信息：<ul>
<li>要授予的权限</li>
<li>被授予访问权限的数据库或表</li>
<li>用户名</li>
<li><img src="image-20230408171413892.png" srcset="/img/loading.gif" lazyload alt="image-20230408171413892"></li>
<li><img src="image-20230408171504395.png" srcset="/img/loading.gif" lazyload alt="image-20230408171504395"></li>
</ul>
</li>
</ul>
<ul>
<li><code>GRANT</code>的反操作为<code>REVOKE</code>，用它来撤销特定的权限。<ul>
<li><img src="image-20230408171550553.png" srcset="/img/loading.gif" lazyload alt="image-20230408171550553"></li>
</ul>
</li>
</ul>
<ul>
<li><code>GRANT</code>和<code>REVOKE</code>可在几个层次上控制访问权限：<ul>
<li><img src="image-20230408171845993.png" srcset="/img/loading.gif" lazyload alt="image-20230408171845993"></li>
</ul>
</li>
</ul>
<ul>
<li>可以授予或撤销的每个权限。<ul>
<li><img src="image-20230408172000954.png" srcset="/img/loading.gif" lazyload alt="image-20230408172000954"><img src="image-20230408172028283.png" srcset="/img/loading.gif" lazyload alt="image-20230408172028283"><img src="image-20230408172054556.png" srcset="/img/loading.gif" lazyload alt="image-20230408172054556"></li>
</ul>
</li>
</ul>
<ul>
<li>在使用<code>GRANT</code>和<code>REVOKE</code>时，用户账号必须存在，但对所涉及的对象没有这个要求。<ul>
<li>这允许管理员在创建数据库和表之前设计和实现安全措施。</li>
</ul>
</li>
</ul>
<ul>
<li>可通过列出各权限并用逗号分隔，将多条<code>GRANT</code>语句串在一起。<ul>
<li><img src="image-20230408172330664.png" srcset="/img/loading.gif" lazyload alt="image-20230408172330664"></li>
</ul>
</li>
</ul>
<h3 id="更改口令"><a href="#更改口令" class="headerlink" title="更改口令"></a>更改口令</h3><ul>
<li>为了更改用户口令，可使用<code>SET PASSWORD</code>语句。新口令必须如下加密。<ul>
<li><img src="image-20230408172427066.png" srcset="/img/loading.gif" lazyload alt="image-20230408172427066"></li>
</ul>
</li>
</ul>
<ul>
<li><code>SET PASSWORD</code>还可以用来设置你自己的口令：<ul>
<li><img src="image-20230408172508431.png" srcset="/img/loading.gif" lazyload alt="image-20230408172508431"></li>
</ul>
</li>
</ul>
<h1 id="第29章-数据库维护"><a href="#第29章-数据库维护" class="headerlink" title="第29章 数据库维护"></a>第29章 数据库维护</h1><h2 id="备份数据"><a href="#备份数据" class="headerlink" title="备份数据"></a>备份数据</h2><ul>
<li>像所有数据一样，MySQL的数据也必须经常备份。</li>
<li>由于MySQL数据库是基于磁盘的文件，普通的备份系统和例程就能备份MySQL的数据。<ul>
<li>由于这些文件总是处于打开和使用状态，普通的文件副本备份不一定总是有效。</li>
</ul>
</li>
</ul>
<ul>
<li>可能的解决方案。<ul>
<li>使用命令行实用程序<code>mysqldump</code>转储所有数据库内容到某个外部文件。</li>
<li>可用命令行实用程序<code>mysqlhotcopy</code>从一个数据库复制所有数据（并非所有数据库引擎都支持这个实用程序）。</li>
<li>可以使用MySQL的<code>BACKUP TABLE</code>或<code>SELECT INTO OUTFILE</code>转储所有数据到某个外部文件。<ul>
<li>这两条语句都接受将要创建的系统文件名，此系统文件必须不存在，否则会出错。</li>
<li>数据可以用<code>RESTORE TABLE</code>来复原。</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li>为了保证所有数据被写到磁盘（包括索引数据），可能需要在进行备份前使用<code>FLUSH TABLES</code>语句。</li>
</ul>
<h2 id="进行数据库维护"><a href="#进行数据库维护" class="headerlink" title="进行数据库维护"></a>进行数据库维护</h2><ul>
<li>MySQL提供了一系列的语句，可以（应该）用来保证数据库正确和正常运行。<ul>
<li><code>ANALYZE TABLE</code>，用来检查表键是否正确。<ul>
<li><img src="image-20230410145225201.png" srcset="/img/loading.gif" lazyload alt="image-20230410145225201"></li>
</ul>
</li>
<li><code>CHECK TABLE</code>用来针对许多问题对表进行检查。<ul>
<li>在MyISAM表上还对索引进行检查。</li>
<li><code>CHECK TABLE</code>支持一系列的用于MyISAM表的方式。<ul>
<li><code>CHANGED</code>检查自最后一次检查以来改动过的表。</li>
<li><code>EXTENDED</code>执行最彻底的检查，<code>FAST</code>只检查未正常关闭的表，<code>MEDIUM</code>检查所有被删除的链接并进行键检验，<code>QUICK</code>只进行快速扫描。</li>
</ul>
</li>
<li><img src="image-20230410145408405.png" srcset="/img/loading.gif" lazyload alt="image-20230410145408405"></li>
</ul>
</li>
<li>如果MyISAM表访问产生不正确和不一致的结果，可能需要用<code>REPAIR TABLE</code>来修复相应的表。</li>
<li>如果从一个表中删除大量数据，应该使用<code>OPTIMIZE TABLE</code>来收回所用的空间，从而优化表的性能。</li>
</ul>
</li>
</ul>
<h2 id="诊断启动问题"><a href="#诊断启动问题" class="headerlink" title="诊断启动问题"></a>诊断启动问题</h2><ul>
<li>在排除系统启动问题时，首先应该尽量用手动启动服务器。<ul>
<li>MySQL服务器自身通过在命令行上执行mysqld启动。</li>
<li>几个重要的mysqld命令行选项：<ul>
<li>–help</li>
<li>–version显示版本信息然后退出</li>
<li>–safe-mode装载减去某些最佳配置的服务器；</li>
<li>–verbose显示全文本消息（为获得更详细的帮助消息与–help联合使用）；</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="查看日志文件"><a href="#查看日志文件" class="headerlink" title="查看日志文件"></a>查看日志文件</h2><ul>
<li>MySQL维护管理员依赖的一系列日志文件。主要的日志文件有以下几种。<ul>
<li>错误日志<ul>
<li>启动和关闭问题以及任意关键错误的细节。</li>
<li>通常名为hostname.err，位于data目录中。</li>
<li>此日志名可用–log-error命令行选项更改。</li>
</ul>
</li>
<li>查询日志<ul>
<li>记录所有MySQL活动，在诊断问题时非常有用。</li>
<li>此日志通常名为hostname.log，位于data目录中。</li>
<li>可以用–log命令行选项更改。</li>
</ul>
</li>
<li>二进制日志<ul>
<li>记录更新过数据（或者可能更新过数据）的所有语句。</li>
<li>日志通常名为hostname-bin，位于data目录内。</li>
<li>此名字可以用–log-bin命令行选项更改。</li>
</ul>
</li>
<li>缓慢查询日志<ul>
<li>此日志记录执行缓慢的任何查询。这个日志在确定数据库何处需要优化很有用。</li>
<li>此日志通常名为hostname-slow.log， 位于data 目录中。</li>
<li>此名字可以用–log-slow-queries命令行选项更改。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="第30章-改善性能"><a href="#第30章-改善性能" class="headerlink" title="第30章 改善性能"></a>第30章 改善性能</h1><h2 id="改善性能"><a href="#改善性能" class="headerlink" title="改善性能"></a>改善性能</h2><ul>
<li>MySQL（与所有DBMS一样）具有特定的硬件建议。</li>
<li>一般来说，关键的生产DBMS应该运行在自己的专用服务器上。</li>
<li>MySQL是用一系列的默认设置预先配置的，从这些设置开始通常是很好的。但过一段时间后你可能需要调整内存分配、缓冲区大小等。</li>
<li>MySQL一个多用户多线程的DBMS。如果这些任务中的某一个执行缓慢，则所有请求都会执行缓慢。<ul>
<li>如果你遇到显著的性能不良，可使用<code>SHOW PROCESSLIST</code>显示所有活动进程（以及它们的线程ID和执行时间）。</li>
<li><code>KILL</code>命令终结某个特定的进程（使用这个命令需要作为管理员登录）。</li>
</ul>
</li>
<li>总是有不止一种方法编写同一条SELECT语句。找出最佳的方法。</li>
<li>使用<code>EXPLAIN</code>语句让MySQL解释它将如何执行一条SELECT语句。</li>
<li>一般来说，存储过程执行得比一条一条地执行其中的各条MySQL语句快。</li>
<li>使用正确的数据类型。</li>
<li>决不要检索比需求还要多的数据。换言之，不要用<code>SELECT *</code>（除非你真正需要每个列）。</li>
<li>有的操作（包括INSERT）支持一个可选的DELAYED关键字，如果使用它，将把控制立即返回给调用程序，并且一旦有可能就实际执行该操作。</li>
<li>在导入数据时，应该关闭自动提交。你可能还想删除索引（包括FULLTEXT索引），然后在导入完成后再重建它们。</li>
<li>必须索引数据库表以改善数据检索的性能。</li>
<li>如果<code>SELECT</code>语句中有一系列复杂的<code>OR</code>条件，通过使用多条<code>SELECT</code>语句和连接它们的<code>UNION</code>语句，你能看到极大的性能改进。</li>
<li>索引改善数据检索的性能，但损害数据插入、删除和更新的性能。</li>
<li><code>LIKE</code>很慢。一般来说，最好是使用<code>FULLTEXT</code>而不是<code>LIKE</code>。</li>
<li>数据库是不断变化的实体。</li>
<li>最重要的规则就是，每条规则在某些条件下都会被打破。</li>
</ul>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>MySQL-notes</div>
      <div>http://example.com/2023/04/10/MySQL-notes/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>Author</div>
          <div>V. Louis</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>Posted on</div>
          <div>April 10, 2023</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>Licensed under</div>
          <div>
            
              
              
                <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - Attribution">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2023/03/17/Professional-C/" title="Professional C++">
                        <span class="hidden-mobile">Professional C++</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>Table of Contents</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">Keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">Blog works best with JavaScript enabled</div>
  </noscript>
</body>
</html>
